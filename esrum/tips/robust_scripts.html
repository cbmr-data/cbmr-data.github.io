<!doctype html>
<html class="no-js" lang="en" data-content_root="">
  <head><meta charset="utf-8"/>
    <meta name="viewport" content="width=device-width,initial-scale=1"/>
    <meta name="color-scheme" content="light dark"><meta name="viewport" content="width=device-width, initial-scale=1" />
<link rel="search" title="Search" href="../search.html" /><link rel="next" title="6.5. Using Snakemake on Esrum" href="snakemake.html" /><link rel="prev" title="6.3. Batching commands outside Slurm" href="batching_commands.html" />

    <!-- Generated with Sphinx 7.1.2 and Furo 2024.01.29 -->
        <title>6.4. Writing robust bash scripts - Esrum Cluster documentation</title>
      <link rel="stylesheet" type="text/css" href="../_static/pygments.css?v=a746c00c" />
    <link rel="stylesheet" type="text/css" href="../_static/styles/furo.css?v=135e06be" />
    <link rel="stylesheet" type="text/css" href="../_static/styles/furo-extensions.css?v=36a5483c" />
    <link rel="stylesheet" type="text/css" href="../_static/css/playback.css?v=2c0b8537" />
    <link rel="stylesheet" type="text/css" href="../_static/css/theme.css?v=e2322aab" />
    
    


<style>
  body {
    --color-code-background: #f8f8f8;
  --color-code-foreground: black;
  
  }
  @media not print {
    body[data-theme="dark"] {
      --color-code-background: #202020;
  --color-code-foreground: #d0d0d0;
  
    }
    @media (prefers-color-scheme: dark) {
      body:not([data-theme="light"]) {
        --color-code-background: #202020;
  --color-code-foreground: #d0d0d0;
  
      }
    }
  }
</style></head>
  <body>
    
    <script>
      document.body.dataset.theme = localStorage.getItem("theme") || "auto";
    </script>
    

<svg xmlns="http://www.w3.org/2000/svg" style="display: none;">
  <symbol id="svg-toc" viewBox="0 0 24 24">
    <title>Contents</title>
    <svg stroke="currentColor" fill="currentColor" stroke-width="0" viewBox="0 0 1024 1024">
      <path d="M408 442h480c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8H408c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8zm-8 204c0 4.4 3.6 8 8 8h480c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8H408c-4.4 0-8 3.6-8 8v56zm504-486H120c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8h784c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8zm0 632H120c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8h784c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8zM115.4 518.9L271.7 642c5.8 4.6 14.4.5 14.4-6.9V388.9c0-7.4-8.5-11.5-14.4-6.9L115.4 505.1a8.74 8.74 0 0 0 0 13.8z"/>
    </svg>
  </symbol>
  <symbol id="svg-menu" viewBox="0 0 24 24">
    <title>Menu</title>
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather-menu">
      <line x1="3" y1="12" x2="21" y2="12"></line>
      <line x1="3" y1="6" x2="21" y2="6"></line>
      <line x1="3" y1="18" x2="21" y2="18"></line>
    </svg>
  </symbol>
  <symbol id="svg-arrow-right" viewBox="0 0 24 24">
    <title>Expand</title>
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather-chevron-right">
      <polyline points="9 18 15 12 9 6"></polyline>
    </svg>
  </symbol>
  <symbol id="svg-sun" viewBox="0 0 24 24">
    <title>Light mode</title>
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round" class="feather-sun">
      <circle cx="12" cy="12" r="5"></circle>
      <line x1="12" y1="1" x2="12" y2="3"></line>
      <line x1="12" y1="21" x2="12" y2="23"></line>
      <line x1="4.22" y1="4.22" x2="5.64" y2="5.64"></line>
      <line x1="18.36" y1="18.36" x2="19.78" y2="19.78"></line>
      <line x1="1" y1="12" x2="3" y2="12"></line>
      <line x1="21" y1="12" x2="23" y2="12"></line>
      <line x1="4.22" y1="19.78" x2="5.64" y2="18.36"></line>
      <line x1="18.36" y1="5.64" x2="19.78" y2="4.22"></line>
    </svg>
  </symbol>
  <symbol id="svg-moon" viewBox="0 0 24 24">
    <title>Dark mode</title>
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round" class="icon-tabler-moon">
      <path stroke="none" d="M0 0h24v24H0z" fill="none" />
      <path d="M12 3c.132 0 .263 0 .393 0a7.5 7.5 0 0 0 7.92 12.446a9 9 0 1 1 -8.313 -12.454z" />
    </svg>
  </symbol>
  <symbol id="svg-sun-half" viewBox="0 0 24 24">
    <title>Auto light/dark mode</title>
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round" class="icon-tabler-shadow">
      <path stroke="none" d="M0 0h24v24H0z" fill="none"/>
      <circle cx="12" cy="12" r="9" />
      <path d="M13 12h5" />
      <path d="M13 15h4" />
      <path d="M13 18h1" />
      <path d="M13 9h4" />
      <path d="M13 6h1" />
    </svg>
  </symbol>
</svg>

<input type="checkbox" class="sidebar-toggle" name="__navigation" id="__navigation">
<input type="checkbox" class="sidebar-toggle" name="__toc" id="__toc">
<label class="overlay sidebar-overlay" for="__navigation">
  <div class="visually-hidden">Hide navigation sidebar</div>
</label>
<label class="overlay toc-overlay" for="__toc">
  <div class="visually-hidden">Hide table of contents sidebar</div>
</label>



<div class="page">
  <header class="mobile-header">
    <div class="header-left">
      <label class="nav-overlay-icon" for="__navigation">
        <div class="visually-hidden">Toggle site navigation sidebar</div>
        <i class="icon"><svg><use href="#svg-menu"></use></svg></i>
      </label>
    </div>
    <div class="header-center">
      <a href="../index.html"><div class="brand">Esrum Cluster  documentation</div></a>
    </div>
    <div class="header-right">
      <div class="theme-toggle-container theme-toggle-header">
        <button class="theme-toggle">
          <div class="visually-hidden">Toggle Light / Dark / Auto color theme</div>
          <svg class="theme-icon-when-auto"><use href="#svg-sun-half"></use></svg>
          <svg class="theme-icon-when-dark"><use href="#svg-moon"></use></svg>
          <svg class="theme-icon-when-light"><use href="#svg-sun"></use></svg>
        </button>
      </div>
      <label class="toc-overlay-icon toc-header-icon" for="__toc">
        <div class="visually-hidden">Toggle table of contents sidebar</div>
        <i class="icon"><svg><use href="#svg-toc"></use></svg></i>
      </label>
    </div>
  </header>
  <aside class="sidebar-drawer">
    <div class="sidebar-container">
      
      <div class="sidebar-sticky"><a class="sidebar-brand" href="../index.html">
  
  
  <span class="sidebar-brand-text">Esrum Cluster  documentation</span>
  
</a><form class="sidebar-search-container" method="get" action="../search.html" role="search">
  <input class="sidebar-search" placeholder="Search" name="q" aria-label="Search">
  <input type="hidden" name="check_keywords" value="yes">
  <input type="hidden" name="area" value="default">
</form>
<div id="searchbox"></div><div class="sidebar-scroll"><div class="sidebar-tree">
  <p class="caption" role="heading"><span class="caption-text">Contents:</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../contact.html">1. Contact</a></li>
<li class="toctree-l1"><a class="reference internal" href="../overview.html">2. Overview</a></li>
<li class="toctree-l1"><a class="reference internal" href="../guidelines.html">3. Guidelines and policies</a></li>
<li class="toctree-l1 has-children"><a class="reference internal" href="../usage/index.html">4. Using the cluster</a><input class="toctree-checkbox" id="toctree-checkbox-1" name="toctree-checkbox-1" role="switch" type="checkbox"/><label for="toctree-checkbox-1"><div class="visually-hidden">Toggle navigation of 4. Using the cluster</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l2 has-children"><a class="reference internal" href="../usage/access/index.html">4.1. Accessing the cluster</a><input class="toctree-checkbox" id="toctree-checkbox-2" name="toctree-checkbox-2" role="switch" type="checkbox"/><label for="toctree-checkbox-2"><div class="visually-hidden">Toggle navigation of 4.1. Accessing the cluster</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l3"><a class="reference internal" href="../usage/access/access.html">4.1.1. Applying for access</a></li>
<li class="toctree-l3"><a class="reference internal" href="../usage/access/connecting.html">4.1.2. Connecting to the cluster</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../usage/filesystem.html">4.2. Projects, data, and home folders</a></li>
<li class="toctree-l2 has-children"><a class="reference internal" href="../usage/slurm/index.html">4.3. Running jobs using Slurm</a><input class="toctree-checkbox" id="toctree-checkbox-3" name="toctree-checkbox-3" role="switch" type="checkbox"/><label for="toctree-checkbox-3"><div class="visually-hidden">Toggle navigation of 4.3. Running jobs using Slurm</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l3"><a class="reference internal" href="../usage/slurm/basics.html">4.3.1. Basic Slurm jobs</a></li>
<li class="toctree-l3"><a class="reference internal" href="../usage/slurm/advanced.html">4.3.2. Advanced Slurm jobs</a></li>
<li class="toctree-l3"><a class="reference internal" href="../usage/slurm/gpu.html">4.3.3. Using the GPU/hi-MEM node</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../usage/modules.html">4.4. Environment modules</a></li>
<li class="toctree-l2"><a class="reference internal" href="../usage/transfers.html">4.5. Transferring data</a></li>
</ul>
</li>
<li class="toctree-l1 has-children"><a class="reference internal" href="../services/index.html">5. Other services</a><input class="toctree-checkbox" id="toctree-checkbox-4" name="toctree-checkbox-4" role="switch" type="checkbox"/><label for="toctree-checkbox-4"><div class="visually-hidden">Toggle navigation of 5. Other services</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l2"><a class="reference internal" href="../services/r.html">5.1. R</a></li>
<li class="toctree-l2"><a class="reference internal" href="../services/rstudio.html">5.2. RStudio</a></li>
<li class="toctree-l2"><a class="reference internal" href="../services/jupyter.html">5.3. Jupyter Notebooks</a></li>
<li class="toctree-l2"><a class="reference internal" href="../services/containers.html">5.4. Running containerized software</a></li>
<li class="toctree-l2"><a class="reference internal" href="../services/shiny.html">5.5. Public and private Shiny servers</a></li>
</ul>
</li>
<li class="toctree-l1 current has-children"><a class="reference internal" href="index.html">6. Tips and tricks</a><input checked="" class="toctree-checkbox" id="toctree-checkbox-5" name="toctree-checkbox-5" role="switch" type="checkbox"/><label for="toctree-checkbox-5"><div class="visually-hidden">Toggle navigation of 6. Tips and tricks</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="modules.html">6.1. Creating environment modules</a></li>
<li class="toctree-l2"><a class="reference internal" href="tmux.html">6.2. Persistent sessions with tmux</a></li>
<li class="toctree-l2"><a class="reference internal" href="batching_commands.html">6.3. Batching commands outside Slurm</a></li>
<li class="toctree-l2 current current-page"><a class="current reference internal" href="#">6.4. Writing robust bash scripts</a></li>
<li class="toctree-l2"><a class="reference internal" href="snakemake.html">6.5. Using Snakemake on Esrum</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../troubleshooting.html">7. Troubleshooting</a></li>
<li class="toctree-l1 has-children"><a class="reference internal" href="../communications/index.html">8. Outreach</a><input class="toctree-checkbox" id="toctree-checkbox-6" name="toctree-checkbox-6" role="switch" type="checkbox"/><label for="toctree-checkbox-6"><div class="visually-hidden">Toggle navigation of 8. Outreach</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l2"><a class="reference internal" href="../communications/welcome.html">8.1. Welcome to CBMRs Compute Cluster Esrum!</a></li>
<li class="toctree-l2"><a class="reference internal" href="../communications/workshops.html">8.2. Workshops and other presentations</a></li>
</ul>
</li>
</ul>

</div>
</div>

      </div>
      
    </div>
  </aside>
  <div class="main">
    <div class="content">
      <div class="article-container">
        <a href="#" class="back-to-top muted-link">
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24">
            <path d="M13 20h-2V8l-5.5 5.5-1.42-1.42L12 4.16l7.92 7.92-1.42 1.42L13 8v12z"></path>
          </svg>
          <span>Back to top</span>
        </a>
        <div class="content-icon-container">
          <div class="edit-this-page">
  <a class="muted-link" href="https://github.com/cbmr-data/cbmr-data.github.io/edit/main/esrum/source/tips/robust_scripts.rst" title="Edit this page">
    <svg aria-hidden="true" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">
      <path stroke="none" d="M0 0h24v24H0z" fill="none"/>
      <path d="M4 20h4l10.5 -10.5a1.5 1.5 0 0 0 -4 -4l-10.5 10.5v4" />
      <line x1="13.5" y1="6.5" x2="17.5" y2="10.5" />
    </svg>
    <span class="visually-hidden">Edit this page</span>
  </a>
</div><div class="theme-toggle-container theme-toggle-content">
            <button class="theme-toggle">
              <div class="visually-hidden">Toggle Light / Dark / Auto color theme</div>
              <svg class="theme-icon-when-auto"><use href="#svg-sun-half"></use></svg>
              <svg class="theme-icon-when-dark"><use href="#svg-moon"></use></svg>
              <svg class="theme-icon-when-light"><use href="#svg-sun"></use></svg>
            </button>
          </div>
          <label class="toc-overlay-icon toc-content-icon" for="__toc">
            <div class="visually-hidden">Toggle table of contents sidebar</div>
            <i class="icon"><svg><use href="#svg-toc"></use></svg></i>
          </label>
        </div>
        <article role="main">
          <section id="writing-robust-bash-scripts">
<span id="p-tips-robustscripts"></span><h1><span class="section-number">6.4. </span>Writing robust bash scripts<a class="headerlink" href="#writing-robust-bash-scripts" title="Permalink to this heading">#</a></h1>
<p>Bash scripts are useful for automating tasks and for running batch jobs.
However the default behavior of bash is to keep running when errors
happen, and that can result in undesirable behavior such as running
programs with the wrong settings, analyzing bad data, and worse. This
page is written on the premise that it is better to fail loudly than to
generate bad results or do bad things quietly.</p>
<p>However, because of the many, many <a class="reference external" href="https://mywiki.wooledge.org/BashPitfalls">bash pitfalls</a>, it is also
recommended to use a more robust programming language when performing
more complex tasks.</p>
<section id="improving-default-bash-behavior">
<h2><span class="section-number">6.4.1. </span>Improving default bash behavior<a class="headerlink" href="#improving-default-bash-behavior" title="Permalink to this heading">#</a></h2>
<p>This section describes several options that can make bash scripts behave
in a more reasonable manner.</p>
<div class="admonition warning">
<p class="admonition-title">Warning</p>
<p>While it is possible to set these options in your shell, this is
<em>not</em> recommended since it will break scripts not designed with these
options in mind and can result in your terminal closing every time
you make a typo. For the same reason you <em>must not</em> set these options
in scripts that you import into your shell using the <code class="docutils literal notranslate"><span class="pre">source</span></code> or
<code class="docutils literal notranslate"><span class="pre">.</span></code> command.</p>
</div>
<section id="prevent-use-of-undefined-variables">
<h3><span class="section-number">6.4.1.1. </span>Prevent use of undefined variables<a class="headerlink" href="#prevent-use-of-undefined-variables" title="Permalink to this heading">#</a></h3>
<p>Variables are used for a variety of purposes in bash, including to
access slurm options in batch scripts. However, unlike in most
programming languages, it is not an error to access a variable that does
not exist:</p>
<div class="highlight-shell notranslate"><div class="highlight"><pre><span></span>$<span class="w"> </span>cat<span class="w"> </span>myscript.sh
<span class="c1">#!/bin/bash</span>
<span class="nv">MY_VARIABLE</span><span class="o">=</span><span class="s2">&quot;record&quot;</span>
<span class="nb">echo</span><span class="w"> </span><span class="s2">&quot;Tourist: I will not buy this </span><span class="si">${</span><span class="nv">MY_VARIABL</span><span class="si">}</span><span class="s2">, it is scratched.&quot;</span>
<span class="nb">echo</span><span class="w"> </span><span class="s2">&quot;Clerk: Sorry?&quot;</span>
$<span class="w"> </span>bash<span class="w"> </span>myscript.sh
Tourist:<span class="w"> </span>I<span class="w"> </span>will<span class="w"> </span>not<span class="w"> </span>buy<span class="w"> </span>this<span class="w"> </span>,<span class="w"> </span>it<span class="w"> </span>is<span class="w"> </span>scratched.
Clerk:<span class="w"> </span>Sorry?
</pre></div>
</div>
<p>Note how the script keeps executing even though we made a mistake. A
common mistake is therefore to misspell variables in scripts and have
bash silent do the wrong thing.</p>
<p>While there are cases where it is useful to allow missing variables,
most of the time this is a mistake. To prevent this, you can set the
<code class="docutils literal notranslate"><span class="pre">nounset</span></code> option, which causes bash to terminate on unset variables:</p>
<div class="highlight-shell notranslate"><div class="highlight"><pre><span></span>$<span class="w"> </span>cat<span class="w"> </span>myscript.sh
<span class="c1">#!/bin/bash</span>
<span class="nb">set</span><span class="w"> </span>-o<span class="w"> </span>nounset<span class="w">  </span><span class="c1"># Exit on unset variables</span>
<span class="nv">MY_VARIABLE</span><span class="o">=</span><span class="s2">&quot;record&quot;</span>
<span class="nb">echo</span><span class="w"> </span><span class="s2">&quot;Tourist: I will not buy this </span><span class="si">${</span><span class="nv">MY_VARIABL</span><span class="si">}</span><span class="s2">, it is scratched.&quot;</span>
<span class="nb">echo</span><span class="w"> </span><span class="s2">&quot;Clerk: Sorry?&quot;</span>
$<span class="w"> </span>bash<span class="w"> </span>myscript.sh
test.sh:<span class="w"> </span>line<span class="w"> </span><span class="m">4</span>:<span class="w"> </span>MY_VARIABL:<span class="w"> </span>unbound<span class="w"> </span>variable
</pre></div>
</div>
<p>This not only tells us that there is a problem with our script (and
where!), but it also stops bash from doing any more damage.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>Should you <em>want</em> to allow a variable to be unset while using
<code class="docutils literal notranslate"><span class="pre">nounset</span></code>, you can use the <code class="docutils literal notranslate"><span class="pre">${name:-default}</span></code> pattern, where
<code class="docutils literal notranslate"><span class="pre">name</span></code> is the name of a variable and <code class="docutils literal notranslate"><span class="pre">default</span></code> is the text you
want to use if <code class="docutils literal notranslate"><span class="pre">name</span></code> is not set. To match the default behavior of
bash simply use <code class="docutils literal notranslate"><span class="pre">${name:-}</span></code>.</p>
</div>
</section>
<section id="stop-running-on-program-failures">
<h3><span class="section-number">6.4.1.2. </span>Stop running on program failures<a class="headerlink" href="#stop-running-on-program-failures" title="Permalink to this heading">#</a></h3>
</section>
<section id="prevent-bash-from-updating-running-scripts">
<h3><span class="section-number">6.4.1.3. </span>Prevent bash from updating running scripts<a class="headerlink" href="#prevent-bash-from-updating-running-scripts" title="Permalink to this heading">#</a></h3>
</section>
<section id="putting-it-all-together">
<h3><span class="section-number">6.4.1.4. </span>Putting it all together<a class="headerlink" href="#putting-it-all-together" title="Permalink to this heading">#</a></h3>
<p>The following bash script template combines the suggestions above and
thereby helps avoid <em>some</em> of the pitfalls of using bash</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="ch">#!/bin/bash</span>
<span class="c1"># FIXME: SBATCH commands go here!</span>

<span class="o">{</span>
<span class="nb">set</span><span class="w"> </span>-o<span class="w"> </span>nounset<span class="w">  </span><span class="c1"># Exit on unset variables</span>
<span class="nb">set</span><span class="w"> </span>-o<span class="w"> </span>pipefail<span class="w"> </span><span class="c1"># Exit on unhandled failure in pipes</span>
<span class="nb">set</span><span class="w"> </span>-o<span class="w"> </span>errtrace<span class="w"> </span><span class="c1"># Have functions inherit ERR traps</span>
<span class="c1"># Print debug message and terminate script on non-zero return codes</span>
<span class="nb">trap</span><span class="w"> </span><span class="s1">&#39;s=$?; echo &gt;&amp;2 &quot;$0: Error on line &quot;$LINENO&quot;: $BASH_COMMAND&quot;; exit $s&#39;</span><span class="w"> </span>ERR

<span class="c1"># FIXME: Your commands go here!</span>

<span class="c1"># Prevent the script from continuing if the file has changed</span>
<span class="nb">exit</span><span class="w"> </span><span class="nv">$?</span>
<span class="o">}</span>
</pre></div>
</div>
<p>Note however that is not guaranteed to catch all</p>
</section>
</section>
<section id="checking-your-scripts-for-common-mistakes">
<h2><span class="section-number">6.4.2. </span>Checking your scripts for common mistakes<a class="headerlink" href="#checking-your-scripts-for-common-mistakes" title="Permalink to this heading">#</a></h2>
<p>In addition to implementing the suggestions listed on this page, it is
recommended that you use the <a class="reference external" href="https://github.com/koalaman/shellcheck">shellcheck</a> to check your bash scripts for
common mistakes.</p>
<p>For example, if we run shell check on the very first script shown on
this page:</p>
<div class="highlight-shell notranslate"><div class="highlight"><pre><span></span>$<span class="w"> </span>module<span class="w"> </span>load<span class="w"> </span>shellcheck
$<span class="w"> </span>shellcheck<span class="w"> </span>myscript.sh

In<span class="w"> </span>myscript.sh<span class="w"> </span>line<span class="w"> </span><span class="m">2</span>:
<span class="nv">MY_VARIABLE</span><span class="o">=</span><span class="s2">&quot;record&quot;</span>
^---------^<span class="w"> </span>SC2034<span class="w"> </span><span class="o">(</span>warning<span class="o">)</span>:<span class="w"> </span>MY_VARIABLE<span class="w"> </span>appears<span class="w"> </span>unused.<span class="w"> </span>Verify<span class="w"> </span>use<span class="w"> </span><span class="o">(</span>or<span class="w"> </span><span class="nb">export</span><span class="w"> </span><span class="k">if</span><span class="w"> </span>used<span class="w"> </span>externally<span class="o">)</span>.

In<span class="w"> </span>myscript.sh<span class="w"> </span>line<span class="w"> </span><span class="m">3</span>:
<span class="nb">echo</span><span class="w"> </span><span class="s2">&quot;I will not buy this </span><span class="si">${</span><span class="nv">MY_VARIABL</span><span class="si">}</span><span class="s2">, it is scratched.&quot;</span>
<span class="w">                        </span>^-----------^<span class="w"> </span>SC2153<span class="w"> </span><span class="o">(</span>info<span class="o">)</span>:<span class="w"> </span>Possible<span class="w"> </span>misspelling:<span class="w"> </span>MY_VARIABL<span class="w"> </span>may<span class="w"> </span>not<span class="w"> </span>be<span class="w"> </span>assigned.<span class="w"> </span>Did<span class="w"> </span>you<span class="w"> </span>mean<span class="w"> </span>MY_VARIABLE?
</pre></div>
</div>
</section>
</section>

        </article>
      </div>
      <footer>
        
        <div class="related-pages">
          <a class="next-page" href="snakemake.html">
              <div class="page-info">
                <div class="context">
                  <span>Next</span>
                </div>
                <div class="title"><span class="section-number">6.5. </span>Using Snakemake on Esrum</div>
              </div>
              <svg class="furo-related-icon"><use href="#svg-arrow-right"></use></svg>
            </a>
          <a class="prev-page" href="batching_commands.html">
              <svg class="furo-related-icon"><use href="#svg-arrow-right"></use></svg>
              <div class="page-info">
                <div class="context">
                  <span>Previous</span>
                </div>
                
                <div class="title"><span class="section-number">6.3. </span>Batching commands outside Slurm</div>
                
              </div>
            </a>
        </div>
        <div class="bottom-of-page">
          <div class="left-details">
            <div class="copyright">
                Copyright &#169; 2023-2024, CBMR Data Analytics; licensed under CC-BY 4.0
            </div>
            Made with <a href="https://www.sphinx-doc.org/">Sphinx</a> and <a class="muted-link" href="https://pradyunsg.me">@pradyunsg</a>'s
            
            <a href="https://github.com/pradyunsg/furo">Furo</a>
            
          </div>
          <div class="right-details">
            
          </div>
        </div>
        
      </footer>
    </div>
    <aside class="toc-drawer">
      
      
      <div class="toc-sticky toc-scroll">
        <div class="toc-title-container">
          <span class="toc-title">
            On this page
          </span>
        </div>
        <div class="toc-tree-container">
          <div class="toc-tree">
            <ul>
<li><a class="reference internal" href="#">6.4. Writing robust bash scripts</a><ul>
<li><a class="reference internal" href="#improving-default-bash-behavior">6.4.1. Improving default bash behavior</a><ul>
<li><a class="reference internal" href="#prevent-use-of-undefined-variables">6.4.1.1. Prevent use of undefined variables</a></li>
<li><a class="reference internal" href="#stop-running-on-program-failures">6.4.1.2. Stop running on program failures</a></li>
<li><a class="reference internal" href="#prevent-bash-from-updating-running-scripts">6.4.1.3. Prevent bash from updating running scripts</a></li>
<li><a class="reference internal" href="#putting-it-all-together">6.4.1.4. Putting it all together</a></li>
</ul>
</li>
<li><a class="reference internal" href="#checking-your-scripts-for-common-mistakes">6.4.2. Checking your scripts for common mistakes</a></li>
</ul>
</li>
</ul>

          </div>
        </div>
      </div>
      
      
    </aside>
  </div>
</div><script data-url_root="../" id="documentation_options" src="../_static/documentation_options.js?v=b3ba4146"></script>
    <script src="../_static/doctools.js?v=888ff710"></script>
    <script src="../_static/sphinx_highlight.js?v=4825356b"></script>
    <script src="../_static/scripts/furo.js?v=32e29ea5"></script>
    <script src="../_static/js/custom.js?v=3a8ddbd3"></script>
    <script src="../_static/js/libgif.js?v=7adcb026"></script>
    <script src="../_static/js/playback.js?v=c0a59f95"></script>
    </body>
</html>
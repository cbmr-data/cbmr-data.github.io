<!doctype html>
<html class="no-js" lang="en" data-content_root="">
  <head><meta charset="utf-8"/>
    <meta name="viewport" content="width=device-width,initial-scale=1"/>
    <meta name="color-scheme" content="light dark"><meta name="viewport" content="width=device-width, initial-scale=1" />
<link rel="search" title="Search" href="../search.html" /><link rel="next" title="5.2. Running containerized software" href="containers.html" /><link rel="prev" title="5. Other services" href="index.html" />

    <!-- Generated with Sphinx 7.1.2 and Furo 2024.01.29 -->
        <title>5.1. R, RStudio, and Jupyter Notebooks - Esrum Cluster documentation</title>
      <link rel="stylesheet" type="text/css" href="../_static/pygments.css?v=a746c00c" />
    <link rel="stylesheet" type="text/css" href="../_static/styles/furo.css?v=135e06be" />
    <link rel="stylesheet" type="text/css" href="../_static/styles/furo-extensions.css?v=36a5483c" />
    <link rel="stylesheet" type="text/css" href="../_static/css/playback.css?v=2c0b8537" />
    <link rel="stylesheet" type="text/css" href="../_static/css/theme.css?v=e2322aab" />
    
    


<style>
  body {
    --color-code-background: #f8f8f8;
  --color-code-foreground: black;
  
  }
  @media not print {
    body[data-theme="dark"] {
      --color-code-background: #202020;
  --color-code-foreground: #d0d0d0;
  
    }
    @media (prefers-color-scheme: dark) {
      body:not([data-theme="light"]) {
        --color-code-background: #202020;
  --color-code-foreground: #d0d0d0;
  
      }
    }
  }
</style></head>
  <body>
    
    <script>
      document.body.dataset.theme = localStorage.getItem("theme") || "auto";
    </script>
    

<svg xmlns="http://www.w3.org/2000/svg" style="display: none;">
  <symbol id="svg-toc" viewBox="0 0 24 24">
    <title>Contents</title>
    <svg stroke="currentColor" fill="currentColor" stroke-width="0" viewBox="0 0 1024 1024">
      <path d="M408 442h480c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8H408c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8zm-8 204c0 4.4 3.6 8 8 8h480c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8H408c-4.4 0-8 3.6-8 8v56zm504-486H120c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8h784c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8zm0 632H120c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8h784c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8zM115.4 518.9L271.7 642c5.8 4.6 14.4.5 14.4-6.9V388.9c0-7.4-8.5-11.5-14.4-6.9L115.4 505.1a8.74 8.74 0 0 0 0 13.8z"/>
    </svg>
  </symbol>
  <symbol id="svg-menu" viewBox="0 0 24 24">
    <title>Menu</title>
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather-menu">
      <line x1="3" y1="12" x2="21" y2="12"></line>
      <line x1="3" y1="6" x2="21" y2="6"></line>
      <line x1="3" y1="18" x2="21" y2="18"></line>
    </svg>
  </symbol>
  <symbol id="svg-arrow-right" viewBox="0 0 24 24">
    <title>Expand</title>
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather-chevron-right">
      <polyline points="9 18 15 12 9 6"></polyline>
    </svg>
  </symbol>
  <symbol id="svg-sun" viewBox="0 0 24 24">
    <title>Light mode</title>
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round" class="feather-sun">
      <circle cx="12" cy="12" r="5"></circle>
      <line x1="12" y1="1" x2="12" y2="3"></line>
      <line x1="12" y1="21" x2="12" y2="23"></line>
      <line x1="4.22" y1="4.22" x2="5.64" y2="5.64"></line>
      <line x1="18.36" y1="18.36" x2="19.78" y2="19.78"></line>
      <line x1="1" y1="12" x2="3" y2="12"></line>
      <line x1="21" y1="12" x2="23" y2="12"></line>
      <line x1="4.22" y1="19.78" x2="5.64" y2="18.36"></line>
      <line x1="18.36" y1="5.64" x2="19.78" y2="4.22"></line>
    </svg>
  </symbol>
  <symbol id="svg-moon" viewBox="0 0 24 24">
    <title>Dark mode</title>
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round" class="icon-tabler-moon">
      <path stroke="none" d="M0 0h24v24H0z" fill="none" />
      <path d="M12 3c.132 0 .263 0 .393 0a7.5 7.5 0 0 0 7.92 12.446a9 9 0 1 1 -8.313 -12.454z" />
    </svg>
  </symbol>
  <symbol id="svg-sun-half" viewBox="0 0 24 24">
    <title>Auto light/dark mode</title>
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round" class="icon-tabler-shadow">
      <path stroke="none" d="M0 0h24v24H0z" fill="none"/>
      <circle cx="12" cy="12" r="9" />
      <path d="M13 12h5" />
      <path d="M13 15h4" />
      <path d="M13 18h1" />
      <path d="M13 9h4" />
      <path d="M13 6h1" />
    </svg>
  </symbol>
</svg>

<input type="checkbox" class="sidebar-toggle" name="__navigation" id="__navigation">
<input type="checkbox" class="sidebar-toggle" name="__toc" id="__toc">
<label class="overlay sidebar-overlay" for="__navigation">
  <div class="visually-hidden">Hide navigation sidebar</div>
</label>
<label class="overlay toc-overlay" for="__toc">
  <div class="visually-hidden">Hide table of contents sidebar</div>
</label>



<div class="page">
  <header class="mobile-header">
    <div class="header-left">
      <label class="nav-overlay-icon" for="__navigation">
        <div class="visually-hidden">Toggle site navigation sidebar</div>
        <i class="icon"><svg><use href="#svg-menu"></use></svg></i>
      </label>
    </div>
    <div class="header-center">
      <a href="../index.html"><div class="brand">Esrum Cluster  documentation</div></a>
    </div>
    <div class="header-right">
      <div class="theme-toggle-container theme-toggle-header">
        <button class="theme-toggle">
          <div class="visually-hidden">Toggle Light / Dark / Auto color theme</div>
          <svg class="theme-icon-when-auto"><use href="#svg-sun-half"></use></svg>
          <svg class="theme-icon-when-dark"><use href="#svg-moon"></use></svg>
          <svg class="theme-icon-when-light"><use href="#svg-sun"></use></svg>
        </button>
      </div>
      <label class="toc-overlay-icon toc-header-icon" for="__toc">
        <div class="visually-hidden">Toggle table of contents sidebar</div>
        <i class="icon"><svg><use href="#svg-toc"></use></svg></i>
      </label>
    </div>
  </header>
  <aside class="sidebar-drawer">
    <div class="sidebar-container">
      
      <div class="sidebar-sticky"><a class="sidebar-brand" href="../index.html">
  
  
  <span class="sidebar-brand-text">Esrum Cluster  documentation</span>
  
</a><form class="sidebar-search-container" method="get" action="../search.html" role="search">
  <input class="sidebar-search" placeholder="Search" name="q" aria-label="Search">
  <input type="hidden" name="check_keywords" value="yes">
  <input type="hidden" name="area" value="default">
</form>
<div id="searchbox"></div><div class="sidebar-scroll"><div class="sidebar-tree">
  <p class="caption" role="heading"><span class="caption-text">Contents:</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../contact.html">1. Contact</a></li>
<li class="toctree-l1"><a class="reference internal" href="../overview.html">2. Overview</a></li>
<li class="toctree-l1"><a class="reference internal" href="../guidelines.html">3. Guidelines</a></li>
<li class="toctree-l1 has-children"><a class="reference internal" href="../usage/index.html">4. Using the cluster</a><input class="toctree-checkbox" id="toctree-checkbox-1" name="toctree-checkbox-1" role="switch" type="checkbox"/><label for="toctree-checkbox-1"><div class="visually-hidden">Toggle navigation of 4. Using the cluster</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l2 has-children"><a class="reference internal" href="../usage/access/index.html">4.1. Accessing the cluster</a><input class="toctree-checkbox" id="toctree-checkbox-2" name="toctree-checkbox-2" role="switch" type="checkbox"/><label for="toctree-checkbox-2"><div class="visually-hidden">Toggle navigation of 4.1. Accessing the cluster</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l3"><a class="reference internal" href="../usage/access/access.html">4.1.1. Applying for access</a></li>
<li class="toctree-l3"><a class="reference internal" href="../usage/access/connecting.html">4.1.2. Connecting to the cluster</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../usage/filesystem.html">4.2. Projects, data, and home folders</a></li>
<li class="toctree-l2 has-children"><a class="reference internal" href="../usage/slurm/index.html">4.3. Running jobs using Slurm</a><input class="toctree-checkbox" id="toctree-checkbox-3" name="toctree-checkbox-3" role="switch" type="checkbox"/><label for="toctree-checkbox-3"><div class="visually-hidden">Toggle navigation of 4.3. Running jobs using Slurm</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l3"><a class="reference internal" href="../usage/slurm/basics.html">4.3.1. Basic Slurm jobs</a></li>
<li class="toctree-l3"><a class="reference internal" href="../usage/slurm/advanced.html">4.3.2. Advanced Slurm jobs</a></li>
<li class="toctree-l3"><a class="reference internal" href="../usage/slurm/gpu.html">4.3.3. Using the GPU/hi-MEM node</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../usage/modules.html">4.4. Environment modules</a></li>
<li class="toctree-l2"><a class="reference internal" href="../usage/transfers.html">4.5. Transferring data</a></li>
</ul>
</li>
<li class="toctree-l1 current has-children"><a class="reference internal" href="index.html">5. Other services</a><input checked="" class="toctree-checkbox" id="toctree-checkbox-4" name="toctree-checkbox-4" role="switch" type="checkbox"/><label for="toctree-checkbox-4"><div class="visually-hidden">Toggle navigation of 5. Other services</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul class="current">
<li class="toctree-l2 current current-page"><a class="current reference internal" href="#">5.1. R, RStudio, and Jupyter Notebooks</a></li>
<li class="toctree-l2"><a class="reference internal" href="containers.html">5.2. Running containerized software</a></li>
<li class="toctree-l2"><a class="reference internal" href="shiny.html">5.3. Public and private Shiny servers</a></li>
</ul>
</li>
<li class="toctree-l1 has-children"><a class="reference internal" href="../tips/index.html">6. Tips and tricks</a><input class="toctree-checkbox" id="toctree-checkbox-5" name="toctree-checkbox-5" role="switch" type="checkbox"/><label for="toctree-checkbox-5"><div class="visually-hidden">Toggle navigation of 6. Tips and tricks</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l2"><a class="reference internal" href="../tips/modules.html">6.1. Creating environment modules</a></li>
<li class="toctree-l2"><a class="reference internal" href="../tips/tmux.html">6.2. Persistent sessions with tmux</a></li>
<li class="toctree-l2"><a class="reference internal" href="../tips/batching_commands.html">6.3. Batching commands outside Slurm</a></li>
<li class="toctree-l2"><a class="reference internal" href="../tips/robust_scripts.html">6.4. Writing robust bash scripts</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../troubleshooting.html">7. Troubleshooting</a></li>
<li class="toctree-l1 has-children"><a class="reference internal" href="../communications/index.html">8. Communications</a><input class="toctree-checkbox" id="toctree-checkbox-6" name="toctree-checkbox-6" role="switch" type="checkbox"/><label for="toctree-checkbox-6"><div class="visually-hidden">Toggle navigation of 8. Communications</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l2"><a class="reference internal" href="../communications/welcome.html">8.1. Welcome to CBMRs Compute Cluster Esrum!</a></li>
<li class="toctree-l2"><a class="reference internal" href="../communications/workshops.html">8.2. Workshops and other presentations</a></li>
</ul>
</li>
</ul>

</div>
</div>

      </div>
      
    </div>
  </aside>
  <div class="main">
    <div class="content">
      <div class="article-container">
        <a href="#" class="back-to-top muted-link">
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24">
            <path d="M13 20h-2V8l-5.5 5.5-1.42-1.42L12 4.16l7.92 7.92-1.42 1.42L13 8v12z"></path>
          </svg>
          <span>Back to top</span>
        </a>
        <div class="content-icon-container">
          
<div class="theme-toggle-container theme-toggle-content">
            <button class="theme-toggle">
              <div class="visually-hidden">Toggle Light / Dark / Auto color theme</div>
              <svg class="theme-icon-when-auto"><use href="#svg-sun-half"></use></svg>
              <svg class="theme-icon-when-dark"><use href="#svg-moon"></use></svg>
              <svg class="theme-icon-when-light"><use href="#svg-sun"></use></svg>
            </button>
          </div>
          <label class="toc-overlay-icon toc-content-icon" for="__toc">
            <div class="visually-hidden">Toggle table of contents sidebar</div>
            <i class="icon"><svg><use href="#svg-toc"></use></svg></i>
          </label>
        </div>
        <article role="main">
          <section id="r-rstudio-and-jupyter-notebooks">
<span id="p-usage-rstudio"></span><h1><span class="section-number">5.1. </span>R, RStudio, and Jupyter Notebooks<a class="headerlink" href="#r-rstudio-and-jupyter-notebooks" title="Permalink to this heading">#</a></h1>
<p>Users of the Esrum cluster have the option of using R, RStudio or
Jupyter Notebooks to run their analyses. This section describes steps
required to use these tools.</p>
<section id="r">
<h2><span class="section-number">5.1.1. </span>R<a class="headerlink" href="#r" title="Permalink to this heading">#</a></h2>
<p>R is available via the module system and modules may be installed in
your home folder using the <code class="docutils literal notranslate"><span class="pre">install.packages</span></code> command:</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="gp">$ </span>module<span class="w"> </span>load<span class="w"> </span>--auto<span class="w"> </span>R/4.3.1
<span class="go">Loading R/4.3.1</span>
<span class="go">  Loading requirement: gcc/11.2.0</span>
<span class="gp">$ </span>R
<span class="go">&gt; install.packages(&quot;ggplot2&quot;)</span>
<span class="go">Warning in install.packages(&quot;ggplot2&quot;) :</span>
<span class="go">  &#39;lib = &quot;/opt/software/R/4.3.1/lib64/R/library&quot;&#39; is not writable</span>
<span class="go">Would you like to use a personal library instead? (yes/No/cancel) yes</span>
<span class="go">Would you like to create a personal library</span>
<span class="go">‘/home/abc123/R/x86_64-pc-linux-gnu-library/4.3’</span>
<span class="go">to install packages into? (yes/No/cancel) yes</span>
</pre></div>
</div>
<p>When asked to pick a mirror, either pick <code class="docutils literal notranslate"><span class="pre">0-Cloud</span></code> by entering <code class="docutils literal notranslate"><span class="pre">1</span></code>
and pressing enter, or enter the number corresponding to a location near
you and press enter:</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="go">--- Please select a CRAN mirror for use in this session ---</span>
<span class="go">Secure CRAN mirrors</span>

<span class="go">1: 0-Cloud [https]</span>
<span class="go">[...]</span>

<span class="go">Selection: 1</span>
</pre></div>
</div>
<p>See below if you get an <code class="docutils literal notranslate"><span class="pre">libtk8.6.so:</span> <span class="pre">cannot</span> <span class="pre">open</span> <span class="pre">shared</span> <span class="pre">object</span> <span class="pre">file:</span>
<span class="pre">No</span> <span class="pre">such</span> <span class="pre">file</span> <span class="pre">or</span> <span class="pre">directory</span></code> or similar error.</p>
</section>
<section id="rstudio">
<h2><span class="section-number">5.1.2. </span>RStudio<a class="headerlink" href="#rstudio" title="Permalink to this heading">#</a></h2>
<p>An <a class="reference external" href="https://posit.co/products/open-source/rstudio/">RStudio</a> server is made available at <a class="reference external" href="http://esrumweb01fl:8787/">http://esrumweb01fl:8787/</a>. To
use this server, you must</p>
<ol class="arabic simple">
<li><p>Be a member of the <code class="docutils literal notranslate"><span class="pre">SRV-esrumweb-users</span></code> group. Simply follow the
steps in the <a class="reference internal" href="../usage/access/access.html#s-applying-for-access"><span class="std std-ref">Applying for access to the cluster</span></a> section, and apply for
access to this group.</p></li>
<li><p>Be connected via the KU VPN (a wired connection at CBMR is <em>not</em>
sufficient). See <a class="reference internal" href="../usage/access/connecting.html#p-usage-connecting"><span class="std std-ref">Connecting to the cluster</span></a> for more information.</p></li>
</ol>
<p>Once you have been been made a member of the <code class="docutils literal notranslate"><span class="pre">SRV-esrumweb-users</span></code> and
connected using the VPN or a wired connection at CBMR, simply visit
<a class="reference external" href="http://esrumweb01fl:8787/">http://esrumweb01fl:8787/</a> and login using your KU credentials.</p>
<p>For your username you should use the short form:</p>
<img alt="../_images/rstudio_login.png" class="align-center" src="../_images/rstudio_login.png" />
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>The RStudio server is managed by KU-IT and we can only provide basic
basic support for using this service.</p>
</div>
</section>
<section id="jupyter-notebook">
<h2><span class="section-number">5.1.3. </span>Jupyter notebook<a class="headerlink" href="#jupyter-notebook" title="Permalink to this heading">#</a></h2>
<p><a class="reference external" href="https://jupyter.org/">Jupyter Notebooks</a> are available via the module system on Esrum and
may be started as follows:</p>
<div class="highlight-shell notranslate"><div class="highlight"><pre><span></span>$<span class="w"> </span>module<span class="w"> </span>load<span class="w"> </span>jupyter-notebook
$<span class="w"> </span>jupyter<span class="w"> </span>notebook<span class="w"> </span>--no-browser<span class="w"> </span>--port<span class="o">=</span>XXXXX
</pre></div>
</div>
<script>
 document.write("The number used in the argument <code class=\"docutils literal notranslate\"><span class=\"pre\">--port=XXXXX</span></code> must be a value in the range 49152 to 65535, and must not be a number used by another user on Esrum. The number shown here was randomly selected for you and you can refresh this page for a different suggestion.")
</script>
<noscript>
The XXXXX in the above command must be replaced with a valid port number. To avoid trouble you should pick a number in the range 49152 to 65535, and you must not pick a number used by another user on Esrum.
</noscript><p>It is also recommended that you run your notebook in a tmux session or
similar, to avoid the notebook shutting down if you lose connection to
the server. See <a class="reference internal" href="../tips/tmux.html#p-tips-tmux"><span class="std std-ref">Persistent sessions with tmux</span></a> for more information.</p>
<p>To actually connect to the notebook server, you will need to setup port
forwarding using the port-number from your command.</p>
<section id="port-forwarding-in-windows-mobaxterm">
<h3><span class="section-number">5.1.3.1. </span>Port forwarding in Windows (MobaXterm)<a class="headerlink" href="#port-forwarding-in-windows-mobaxterm" title="Permalink to this heading">#</a></h3>
<p>The following instructions assume that you are using MobaXterm. If not,
then please refer to the documentation for your tool of choice.</p>
<ol class="arabic">
<li><p>Install and configure MobaXterm as described in
<a class="reference internal" href="../usage/access/connecting.html#s-configure-mobaxterm"><span class="std std-ref">Configuring MobaXterm</span></a>.</p></li>
<li><p>Click the middle <code class="docutils literal notranslate"><span class="pre">Tunneling</span></code> button on the toolbar.</p>
<img alt="../_images/mobaxterm_tunnel_01.png" class="align-center" src="../_images/mobaxterm_tunnel_01.png" />
</li>
<li><p>Click the bottom-left <code class="docutils literal notranslate"><span class="pre">New</span> <span class="pre">SSH</span> <span class="pre">Tunnel</span></code> button.</p>
<img alt="../_images/mobaxterm_tunnel_02.png" class="align-center" src="../_images/mobaxterm_tunnel_02.png" />
</li>
<li><p>Fill out the tunnel dialogue as indicated, replacing <code class="docutils literal notranslate"><span class="pre">12356</span></code> with
your chosen port number (e.g. XXXXX) and replacing <code class="docutils literal notranslate"><span class="pre">abc123</span></code> with
your KU username. The full name of the SSH server (written in the top
row on bottom right) is <code class="docutils literal notranslate"><span class="pre">esrumhead01fl.unicph.domain</span></code>. Finally
click <code class="docutils literal notranslate"><span class="pre">Save</span></code>:</p>
<img alt="../_images/mobaxterm_tunnel_03.png" class="align-center" src="../_images/mobaxterm_tunnel_03.png" />
</li>
<li><p>If the tunnel does not start automatically, press either the &quot;Play&quot;
button or the <code class="docutils literal notranslate"><span class="pre">Start</span> <span class="pre">all</span> <span class="pre">tunnels</span></code> button:</p>
<img alt="../_images/mobaxterm_tunnel_04.png" class="align-center" src="../_images/mobaxterm_tunnel_04.png" />
</li>
<li><p>Enter your password and your SSH tunnel should now be active.</p></li>
</ol>
<p>Once you have configured MobaXterm and enabled port forwarding, you can
open your notebook via the
<code class="docutils literal notranslate"><span class="pre">http://localhost:XXXXX/?token=${long_text_here}</span></code> URL that Jupyter
Notebook printed in your terminal.</p>
</section>
<section id="port-forwarding-on-linux-osx">
<h3><span class="section-number">5.1.3.2. </span>Port forwarding on Linux/OSX<a class="headerlink" href="#port-forwarding-on-linux-osx" title="Permalink to this heading">#</a></h3>
<p>It is recommended to enable port forwarding using your <code class="docutils literal notranslate"><span class="pre">~/.ssh/config</span></code>
file. This is accomplished by adding a <code class="docutils literal notranslate"><span class="pre">LocalForward</span></code> line to your
entry for Esrum as shown below (see also the section about
<a class="reference internal" href="../usage/access/connecting.html#s-connecting-linux"><span class="std std-ref">Connecting on Linux or OSX</span></a>):</p>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>Host esrum esrumhead01fl esrumhead01fl.unicph.domain
    HostName esrumhead01fl.unicph.domain
    User abc123

    LocalForward XXXXX localhost:XXXXX
</pre></div>
</div>
<p>The <code class="docutils literal notranslate"><span class="pre">LocalForward</span></code> option consists of two parts: The port used by the
notebook on Esrum (XXXXX), and the address via which the notebook on
Esrum should be accessible on your PC (localhost:XXXXX).</p>
<p>Alternatively, you can start start/stop port forwarding on demand by
using an explicit SSH command. The <code class="docutils literal notranslate"><span class="pre">-N</span></code> option is optional and stops
ssh from starting a shell once it has connected to Esrum:</p>
<div class="highlight-shell notranslate"><div class="highlight"><pre><span></span>$<span class="w"> </span>ssh<span class="w"> </span>-N<span class="w"> </span>-L<span class="w"> </span>XXXXX:localhost:XXXXX<span class="w"> </span>abc123@esrumhead01fl.unicph.domain
</pre></div>
</div>
<p>Once you have port forwarding is enabled, you can open your notebook via
the <code class="docutils literal notranslate"><span class="pre">http://localhost:XXXXX/?token=${long_text_here}</span></code> URL that Jupyter
Notebook printed in your terminal.</p>
</section>
</section>
<section id="troubleshooting">
<h2><span class="section-number">5.1.4. </span>Troubleshooting<a class="headerlink" href="#troubleshooting" title="Permalink to this heading">#</a></h2>
<section id="r-libtk8-6-so-cannot-open-shared-object-file">
<h3><span class="section-number">5.1.4.1. </span>R: libtk8.6.so: cannot open shared object file<a class="headerlink" href="#r-libtk8-6-so-cannot-open-shared-object-file" title="Permalink to this heading">#</a></h3>
<p>Users connecting to Esrum with X11 forwarding enabled, for example using
mobaXterm with default settings, may observe the following error when
running the <code class="docutils literal notranslate"><span class="pre">install.packages</span></code>:</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="go">--- Please select a CRAN mirror for use in this session ---</span>
<span class="go">Error: .onLoad failed in loadNamespace() for &#39;tcltk&#39;, details:</span>
<span class="go">  call: dyn.load(file, DLLpath = DLLpath, ...)</span>
<span class="go">  error: unable to load shared object &#39;/opt/software/R/4.3.1/lib64/R/library/tcltk/libs/tcltk.so&#39;:</span>
<span class="go">  libtk8.6.so: cannot open shared object file: No such file or directory</span>
</pre></div>
</div>
<p>If so, then you must disable graphical menus before running
<code class="docutils literal notranslate"><span class="pre">install.packages</span></code> by first entering the following command:</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="go">&gt; options(menu.graphics=FALSE)</span>
</pre></div>
</div>
<p>Then simply run <code class="docutils literal notranslate"><span class="pre">install.packages</span></code> again.</p>
<p>You can also set the R option permanently by running the following in
your (bash) terminal:</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="gp">$ </span><span class="nb">echo</span><span class="w"> </span><span class="s1">&#39;options(menu.graphics=FALSE)&#39;</span><span class="w"> </span><span class="p">|</span><span class="w"> </span>tee<span class="w"> </span>-a<span class="w"> </span>~/.Rprofile
</pre></div>
</div>
</section>
<section id="rstudio-incorrect-or-invalid-username-password">
<h3><span class="section-number">5.1.4.2. </span>RStudio: Incorrect or invalid username/password<a class="headerlink" href="#rstudio-incorrect-or-invalid-username-password" title="Permalink to this heading">#</a></h3>
<p>Please make sure that you are entering your username in the short form
and that you have been added as a member of the <code class="docutils literal notranslate"><span class="pre">SRV-esrumweb-users</span></code>
group (see above). If the problem persists, please <a class="reference internal" href="../contact.html#p-contact"><span class="std std-ref">Contact</span></a> us
for assistance.</p>
</section>
<section id="rstudio-logging-in-takes-a-very-long-time">
<h3><span class="section-number">5.1.4.3. </span>RStudio: Logging in takes a very long time<a class="headerlink" href="#rstudio-logging-in-takes-a-very-long-time" title="Permalink to this heading">#</a></h3>
<p>Similar to regular R, RStudio will automatically save the data you have
loaded into your R session and will restore it when you return later, so
that you can continue your work. However, this many result in large
amounts of data being saved and loading this data may result in a large
delay when you attempt to login at a later date.</p>
<p>It is therefore recommended that you regularly clean up your workspace
using the built in tools, when you no longer need to have the data
loaded in R.</p>
<p>You can remove individual bits of data using the <code class="docutils literal notranslate"><span class="pre">rm</span></code> function in R.
This works both when using regular R and when using RStudio. The
following gives two examples of using the <code class="docutils literal notranslate"><span class="pre">rm</span></code> function, one removing
a single variable and the other removing <em>all</em> variables in the current
session:</p>
<div class="highlight-r notranslate"><div class="highlight"><pre><span></span><span class="c1"># 1. Remove the variable `my_variable`</span>
<span class="nf">rm</span><span class="p">(</span><span class="n">my_variable</span><span class="p">)</span>

<span class="c1"># 2. Remove all variables from your R session</span>
<span class="nf">rm</span><span class="p">(</span><span class="n">list</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nf">ls</span><span class="p">())</span>
</pre></div>
</div>
<p>Alternatively you can remove all data saved in your R session using the
broom icon on the <code class="docutils literal notranslate"><span class="pre">Environment</span></code> tab:</p>
<img alt="../_images/rstudio_gc_01.png" class="align-center" src="../_images/rstudio_gc_01.png" />
<img alt="../_images/rstudio_gc_02.png" class="align-center" src="../_images/rstudio_gc_02.png" />
<p>If you wish to prevent this issue in the first case, then you can also
turn off saving the data in your session on exit and/or turn off loading
the saved data on startup. This is accomplished via the <code class="docutils literal notranslate"><span class="pre">Global</span>
<span class="pre">Options...</span></code> accessible from the <code class="docutils literal notranslate"><span class="pre">Tools</span></code> menu:</p>
<img alt="../_images/rstudio_gc_03.png" class="align-center" src="../_images/rstudio_gc_03.png" />
<p>Should your R session have grown to such a size that you simply cannot
login and clean it up, then it my be necessary to remove the files
containing the data that R/RStudio has saved. This data is stored in two
locations:</p>
<ol class="arabic simple">
<li><p>In the <code class="docutils literal notranslate"><span class="pre">.RData</span></code> file in your home (<code class="docutils literal notranslate"><span class="pre">~/.RData</span></code>). This is where R
saves your data if you answer yes <code class="docutils literal notranslate"><span class="pre">Save</span> <span class="pre">workspace</span> <span class="pre">image?</span> <span class="pre">[y/n/c]</span></code>
when quitting R.</p></li>
<li><p>In the <code class="docutils literal notranslate"><span class="pre">environment</span></code> file in your RStudio session folder
(<code class="docutils literal notranslate"><span class="pre">~/.local/share/rstudio/sessions/active/session-*/suspended-session-data/environment</span></code>).
This is where Rstudio saves your data should your login time-out
while using RStudio.</p></li>
</ol>
<p>Please <a class="reference internal" href="../contact.html#p-contact"><span class="std std-ref">Contact</span></a> us and we can help you remove the correct files.</p>
</section>
<section id="jupyter-notebooks-browser-error-when-opening-url">
<h3><span class="section-number">5.1.4.4. </span>Jupyter Notebooks: Browser error when opening URL<a class="headerlink" href="#jupyter-notebooks-browser-error-when-opening-url" title="Permalink to this heading">#</a></h3>
<p>Depending on your browser you may receive one of the following errors.
The typical causes are listed, but the exact error message will depend
on your browser. It is therefore helpful to review all possible causes
listed here.</p>
<p>When using Chrome, the cause is typically listed below the line that
says &quot;This site can't be reached&quot;.</p>
<ul>
<li><p>&quot;The connection was reset&quot;</p>
<p>This typically indicates that Jupyter Notebook isn't running on the
server, or that it is running on a different port than the one you've
forwarded. Check that Jupyter Notebook is running and make sure that
your forwarded ports match those used by Jupyter Notebook on Esrum.</p>
</li>
<li><p>&quot;localhost refused to connect&quot; or &quot;Unable to connect&quot;</p>
<p>This typically indicates that port forwarding isn't active, or that
you have entered the wrong port number in your browser. Verify that
port forwarding is active and that you are using the correct port
number in the <code class="docutils literal notranslate"><span class="pre">localhost</span></code> URL.</p>
</li>
<li><p>&quot;Check if there is a typo in esrumweb01fl&quot; or &quot;We're having trouble
finding that site&quot;</p>
<p>You are must likely connecting from a network outside of KU. Make
sure that you are using a wired connection at CBMR and/or that the
VPN is activated and try again.</p>
</li>
</ul>
<script defer>
 var random_port = getEphemeralPort();

 function updatePort(elem) {
   if (elem.childNodes.length) {
     elem.childNodes.forEach(updatePort);
   } else if (elem.textContent) {
     elem.textContent = elem.textContent.replaceAll("XXXXX", random_port);
   }

   if (elem.href && elem.href.includes("XXXXX")) {
     elem.href = elem.href.replaceAll("XXXXX", random_port);
     // open in new page
     elem.target = "_blank";
   }
 };

 document.addEventListener('DOMContentLoaded', function() {
   updatePort(document.body);
 });
</script></section>
</section>
</section>

        </article>
      </div>
      <footer>
        
        <div class="related-pages">
          <a class="next-page" href="containers.html">
              <div class="page-info">
                <div class="context">
                  <span>Next</span>
                </div>
                <div class="title"><span class="section-number">5.2. </span>Running containerized software</div>
              </div>
              <svg class="furo-related-icon"><use href="#svg-arrow-right"></use></svg>
            </a>
          <a class="prev-page" href="index.html">
              <svg class="furo-related-icon"><use href="#svg-arrow-right"></use></svg>
              <div class="page-info">
                <div class="context">
                  <span>Previous</span>
                </div>
                
                <div class="title"><span class="section-number">5. </span>Other services</div>
                
              </div>
            </a>
        </div>
        <div class="bottom-of-page">
          <div class="left-details">
            <div class="copyright">
                Copyright &#169; 2023, CBMR Phenomics
            </div>
            Made with <a href="https://www.sphinx-doc.org/">Sphinx</a> and <a class="muted-link" href="https://pradyunsg.me">@pradyunsg</a>'s
            
            <a href="https://github.com/pradyunsg/furo">Furo</a>
            
          </div>
          <div class="right-details">
            
          </div>
        </div>
        
      </footer>
    </div>
    <aside class="toc-drawer">
      
      
      <div class="toc-sticky toc-scroll">
        <div class="toc-title-container">
          <span class="toc-title">
            On this page
          </span>
        </div>
        <div class="toc-tree-container">
          <div class="toc-tree">
            <ul>
<li><a class="reference internal" href="#">5.1. R, RStudio, and Jupyter Notebooks</a><ul>
<li><a class="reference internal" href="#r">5.1.1. R</a></li>
<li><a class="reference internal" href="#rstudio">5.1.2. RStudio</a></li>
<li><a class="reference internal" href="#jupyter-notebook">5.1.3. Jupyter notebook</a><ul>
<li><a class="reference internal" href="#port-forwarding-in-windows-mobaxterm">5.1.3.1. Port forwarding in Windows (MobaXterm)</a></li>
<li><a class="reference internal" href="#port-forwarding-on-linux-osx">5.1.3.2. Port forwarding on Linux/OSX</a></li>
</ul>
</li>
<li><a class="reference internal" href="#troubleshooting">5.1.4. Troubleshooting</a><ul>
<li><a class="reference internal" href="#r-libtk8-6-so-cannot-open-shared-object-file">5.1.4.1. R: libtk8.6.so: cannot open shared object file</a></li>
<li><a class="reference internal" href="#rstudio-incorrect-or-invalid-username-password">5.1.4.2. RStudio: Incorrect or invalid username/password</a></li>
<li><a class="reference internal" href="#rstudio-logging-in-takes-a-very-long-time">5.1.4.3. RStudio: Logging in takes a very long time</a></li>
<li><a class="reference internal" href="#jupyter-notebooks-browser-error-when-opening-url">5.1.4.4. Jupyter Notebooks: Browser error when opening URL</a></li>
</ul>
</li>
</ul>
</li>
</ul>

          </div>
        </div>
      </div>
      
      
    </aside>
  </div>
</div><script data-url_root="../" id="documentation_options" src="../_static/documentation_options.js?v=b3ba4146"></script>
    <script src="../_static/doctools.js?v=888ff710"></script>
    <script src="../_static/sphinx_highlight.js?v=4825356b"></script>
    <script src="../_static/scripts/furo.js?v=32e29ea5"></script>
    <script src="../_static/js/custom.js?v=7a324050"></script>
    <script src="../_static/js/libgif.js?v=7adcb026"></script>
    <script src="../_static/js/playback.js?v=c0a59f95"></script>
    </body>
</html>
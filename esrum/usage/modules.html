<!doctype html>
<html class="no-js" lang="en" data-content_root="../">
  <head><meta charset="utf-8"/>
    <meta name="viewport" content="width=device-width,initial-scale=1"/>
    <meta name="color-scheme" content="light dark"><meta name="viewport" content="width=device-width, initial-scale=1" />
<link rel="search" title="Search" href="../search.html" /><link rel="next" title="Transferring data" href="transfers.html" /><link rel="prev" title="GPU / high-memory jobs" href="slurm/gpu.html" />

    <!-- Generated with Sphinx 7.4.7 and Furo 2024.04.27 -->
        <title>Software on Esrum - Esrum Cluster documentation</title>
      <link rel="stylesheet" type="text/css" href="../_static/pygments.css?v=d111a655" />
    <link rel="stylesheet" type="text/css" href="../_static/styles/furo.css?v=437aa6ec" />
    <link rel="stylesheet" type="text/css" href="../_static/copybutton.css?v=76b2166b" />
    <link rel="stylesheet" type="text/css" href="../_static/styles/furo-extensions.css?v=36a5483c" />
    <link rel="stylesheet" type="text/css" href="../_static/css/playback.css?v=2c0b8537" />
    <link rel="stylesheet" type="text/css" href="../_static/css/theme.css?v=16bf9909" />
    
    


<style>
  body {
    --color-code-background: #f2f2f2;
  --color-code-foreground: #1e1e1e;
  
  }
  @media not print {
    body[data-theme="dark"] {
      --color-code-background: #2b2b2b;
  --color-code-foreground: #f8f8f2;
  
    }
    @media (prefers-color-scheme: dark) {
      body:not([data-theme="light"]) {
        --color-code-background: #2b2b2b;
  --color-code-foreground: #f8f8f2;
  
      }
    }
  }
</style></head>
  <body>
    
    <script>
      document.body.dataset.theme = localStorage.getItem("theme") || "auto";
    </script>
    

<svg xmlns="http://www.w3.org/2000/svg" style="display: none;">
  <symbol id="svg-toc" viewBox="0 0 24 24">
    <title>Contents</title>
    <svg stroke="currentColor" fill="currentColor" stroke-width="0" viewBox="0 0 1024 1024">
      <path d="M408 442h480c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8H408c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8zm-8 204c0 4.4 3.6 8 8 8h480c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8H408c-4.4 0-8 3.6-8 8v56zm504-486H120c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8h784c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8zm0 632H120c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8h784c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8zM115.4 518.9L271.7 642c5.8 4.6 14.4.5 14.4-6.9V388.9c0-7.4-8.5-11.5-14.4-6.9L115.4 505.1a8.74 8.74 0 0 0 0 13.8z"/>
    </svg>
  </symbol>
  <symbol id="svg-menu" viewBox="0 0 24 24">
    <title>Menu</title>
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather-menu">
      <line x1="3" y1="12" x2="21" y2="12"></line>
      <line x1="3" y1="6" x2="21" y2="6"></line>
      <line x1="3" y1="18" x2="21" y2="18"></line>
    </svg>
  </symbol>
  <symbol id="svg-arrow-right" viewBox="0 0 24 24">
    <title>Expand</title>
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather-chevron-right">
      <polyline points="9 18 15 12 9 6"></polyline>
    </svg>
  </symbol>
  <symbol id="svg-sun" viewBox="0 0 24 24">
    <title>Light mode</title>
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round" class="feather-sun">
      <circle cx="12" cy="12" r="5"></circle>
      <line x1="12" y1="1" x2="12" y2="3"></line>
      <line x1="12" y1="21" x2="12" y2="23"></line>
      <line x1="4.22" y1="4.22" x2="5.64" y2="5.64"></line>
      <line x1="18.36" y1="18.36" x2="19.78" y2="19.78"></line>
      <line x1="1" y1="12" x2="3" y2="12"></line>
      <line x1="21" y1="12" x2="23" y2="12"></line>
      <line x1="4.22" y1="19.78" x2="5.64" y2="18.36"></line>
      <line x1="18.36" y1="5.64" x2="19.78" y2="4.22"></line>
    </svg>
  </symbol>
  <symbol id="svg-moon" viewBox="0 0 24 24">
    <title>Dark mode</title>
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round" class="icon-tabler-moon">
      <path stroke="none" d="M0 0h24v24H0z" fill="none" />
      <path d="M12 3c.132 0 .263 0 .393 0a7.5 7.5 0 0 0 7.92 12.446a9 9 0 1 1 -8.313 -12.454z" />
    </svg>
  </symbol>
  <symbol id="svg-sun-half" viewBox="0 0 24 24">
    <title>Auto light/dark mode</title>
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round" class="icon-tabler-shadow">
      <path stroke="none" d="M0 0h24v24H0z" fill="none"/>
      <circle cx="12" cy="12" r="9" />
      <path d="M13 12h5" />
      <path d="M13 15h4" />
      <path d="M13 18h1" />
      <path d="M13 9h4" />
      <path d="M13 6h1" />
    </svg>
  </symbol>
</svg>

<input type="checkbox" class="sidebar-toggle" name="__navigation" id="__navigation">
<input type="checkbox" class="sidebar-toggle" name="__toc" id="__toc">
<label class="overlay sidebar-overlay" for="__navigation">
  <div class="visually-hidden">Hide navigation sidebar</div>
</label>
<label class="overlay toc-overlay" for="__toc">
  <div class="visually-hidden">Hide table of contents sidebar</div>
</label>

<a class="skip-to-content muted-link" href="#furo-main-content">Skip to content</a>



<div class="page">
  <header class="mobile-header">
    <div class="header-left">
      <label class="nav-overlay-icon" for="__navigation">
        <div class="visually-hidden">Toggle site navigation sidebar</div>
        <i class="icon"><svg><use href="#svg-menu"></use></svg></i>
      </label>
    </div>
    <div class="header-center">
      <a href="../index.html"><div class="brand">Esrum Cluster  documentation</div></a>
    </div>
    <div class="header-right">
      <div class="theme-toggle-container theme-toggle-header">
        <button class="theme-toggle">
          <div class="visually-hidden">Toggle Light / Dark / Auto color theme</div>
          <svg class="theme-icon-when-auto"><use href="#svg-sun-half"></use></svg>
          <svg class="theme-icon-when-dark"><use href="#svg-moon"></use></svg>
          <svg class="theme-icon-when-light"><use href="#svg-sun"></use></svg>
        </button>
      </div>
      <label class="toc-overlay-icon toc-header-icon" for="__toc">
        <div class="visually-hidden">Toggle table of contents sidebar</div>
        <i class="icon"><svg><use href="#svg-toc"></use></svg></i>
      </label>
    </div>
  </header>
  <aside class="sidebar-drawer">
    <div class="sidebar-container">
      
      <div class="sidebar-sticky"><a class="sidebar-brand" href="../index.html">
  
  
  <span class="sidebar-brand-text">Esrum Cluster  documentation</span>
  
</a><form class="sidebar-search-container" method="get" action="../search.html" role="search">
  <input class="sidebar-search" placeholder="Search" name="q" aria-label="Search">
  <input type="hidden" name="check_keywords" value="yes">
  <input type="hidden" name="area" value="default">
</form>
<div id="searchbox"></div><div class="sidebar-scroll"><div class="sidebar-tree">
  <ul>
<li class="toctree-l1"><a class="reference internal" href="../contact.html">Contact us</a></li>
<li class="toctree-l1"><a class="reference internal" href="../overview.html">Overview of cluster</a></li>
<li class="toctree-l1"><a class="reference internal" href="../guidelines.html">Guidelines and policies</a></li>
<li class="toctree-l1"><a class="reference internal" href="../troubleshooting.html">Troubleshooting</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Using the cluster</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="access/access.html">Applying for access</a></li>
<li class="toctree-l1"><a class="reference internal" href="access/connecting.html">Connecting to the cluster</a></li>
<li class="toctree-l1 has-children"><a class="reference internal" href="filesystem.html">Data storage on Esrum</a><input class="toctree-checkbox" id="toctree-checkbox-1" name="toctree-checkbox-1" role="switch" type="checkbox"/><label for="toctree-checkbox-1"><div class="visually-hidden">Toggle navigation of Data storage on Esrum</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l2"><a class="reference internal" href="projects.html">Creating projects and datasets</a></li>
</ul>
</li>
<li class="toctree-l1 has-children"><a class="reference internal" href="slurm/index.html">Running jobs using Slurm</a><input class="toctree-checkbox" id="toctree-checkbox-2" name="toctree-checkbox-2" role="switch" type="checkbox"/><label for="toctree-checkbox-2"><div class="visually-hidden">Toggle navigation of Running jobs using Slurm</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l2"><a class="reference internal" href="slurm/basics.html">Basic Slurm jobs</a></li>
<li class="toctree-l2"><a class="reference internal" href="slurm/advanced.html">Advanced Slurm jobs</a></li>
<li class="toctree-l2"><a class="reference internal" href="slurm/monitoring.html">Monitoring slurm jobs</a></li>
<li class="toctree-l2"><a class="reference internal" href="slurm/gpu.html">GPU / high-memory jobs</a></li>
</ul>
</li>
<li class="toctree-l1 current current-page"><a class="current reference internal" href="#">Software on Esrum</a></li>
<li class="toctree-l1"><a class="reference internal" href="transfers.html">Transferring data</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Resources</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../resources/cohorts.html">Human cohorts</a></li>
<li class="toctree-l1"><a class="reference internal" href="../resources/common.html">Common datasets</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Other services</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../services/rstudio.html">RStudio</a></li>
<li class="toctree-l1"><a class="reference internal" href="../services/jupyter.html">Jupyter Notebooks</a></li>
<li class="toctree-l1"><a class="reference internal" href="../services/containers.html">Containerized software</a></li>
<li class="toctree-l1"><a class="reference internal" href="../services/shiny.html">Shiny servers</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Tips and tricks</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../tips/modules.html">Creating environment modules</a></li>
<li class="toctree-l1"><a class="reference internal" href="../tips/tmux.html">Persistent sessions with tmux</a></li>
<li class="toctree-l1"><a class="reference internal" href="../tips/batching_commands.html">Batching commands in bash</a></li>
<li class="toctree-l1"><a class="reference internal" href="../tips/robust_scripts.html">Writing robust bash scripts</a></li>
<li class="toctree-l1"><a class="reference internal" href="../tips/snakemake.html">Using Snakemake on Esrum</a></li>
<li class="toctree-l1"><a class="reference internal" href="../tips/r.html">Using R on Esrum</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Outreach</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../communications/messages.html">Welcome email</a></li>
<li class="toctree-l1"><a class="reference internal" href="../communications/presentations.html">Presentations</a></li>
</ul>

</div>
</div>

      </div>
      
    </div>
  </aside>
  <div class="main">
    <div class="content">
      <div class="article-container">
        <a href="#" class="back-to-top muted-link">
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24">
            <path d="M13 20h-2V8l-5.5 5.5-1.42-1.42L12 4.16l7.92 7.92-1.42 1.42L13 8v12z"></path>
          </svg>
          <span>Back to top</span>
        </a>
        <div class="content-icon-container">
          <div class="edit-this-page">
  <a class="muted-link" href="https://github.com/cbmr-data/cbmr-data.github.io/edit/main/esrum/source/usage/modules.rst" title="Edit this page">
    <svg aria-hidden="true" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">
      <path stroke="none" d="M0 0h24v24H0z" fill="none"/>
      <path d="M4 20h4l10.5 -10.5a1.5 1.5 0 0 0 -4 -4l-10.5 10.5v4" />
      <line x1="13.5" y1="6.5" x2="17.5" y2="10.5" />
    </svg>
    <span class="visually-hidden">Edit this page</span>
  </a>
</div><div class="theme-toggle-container theme-toggle-content">
            <button class="theme-toggle">
              <div class="visually-hidden">Toggle Light / Dark / Auto color theme</div>
              <svg class="theme-icon-when-auto"><use href="#svg-sun-half"></use></svg>
              <svg class="theme-icon-when-dark"><use href="#svg-moon"></use></svg>
              <svg class="theme-icon-when-light"><use href="#svg-sun"></use></svg>
            </button>
          </div>
          <label class="toc-overlay-icon toc-content-icon" for="__toc">
            <div class="visually-hidden">Toggle table of contents sidebar</div>
            <i class="icon"><svg><use href="#svg-toc"></use></svg></i>
          </label>
        </div>
        <article role="main" id="furo-main-content">
          <section id="software-on-esrum">
<span id="p-usage-modules"></span><h1>Software on Esrum<a class="headerlink" href="#software-on-esrum" title="Link to this heading">¶</a></h1>
<p>A wide range of software (scientific and otherwise) is made available on
Esrum via so-called <a class="reference external" href="https://modules.sourceforge.net/">Environment modules</a>. Environment modules allow
you &quot;load&quot; specific software, and specific <em>versions</em> of software, as
needed. If used correctly this can help to both document your analyses
and to make them more reproducible.</p>
<p>Modules on Esrum are primarily provided by UCPH-IT, who add new tools
and new versions of tools when requested (see
<a class="reference internal" href="#s-requesting-missing-modules"><span class="std std-ref">Requesting software modules</span></a>). A browser-based <a class="reference external" href="https://fssw.ku.dk/envmod.html">list of modules</a>
provided by UCPH-IT is available. Users can also set up their own
private or shared environment modules as described in the
<a class="reference internal" href="../tips/modules.html#p-tips-modules"><span class="std std-ref">Creating environment modules</span></a> section.</p>
<p>A collection of software managed by the Data Analytics team is also
available. See the <a class="reference internal" href="#s-shared-modules"><span class="std std-ref">Shared CBMR modules</span></a> section below.</p>
<section id="basic-usage">
<h2>Basic usage<a class="headerlink" href="#basic-usage" title="Link to this heading">¶</a></h2>
<p>This section briefly describe how to carry out common tasks using the
module system: Finding what modules are available, loading a module, and
unloading them again. For more information see the <a class="reference external" href="https://modules.readthedocs.io/en/v4.5.2/">official
documentation</a>.</p>
<section id="finding-available-modules">
<h3>Finding available modules<a class="headerlink" href="#finding-available-modules" title="Link to this heading">¶</a></h3>
<p>The first step is to determine what modules are available on the server.
This is accomplished with the <code class="docutils literal notranslate"><span class="pre">module</span> <span class="pre">avail</span></code> command, that lists all
available modules by default:</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="gp">$ </span>module<span class="w"> </span>avail
<span class="go">-------------------------- /opt/software/modules --------------------------</span>
<span class="go">anaconda2/4.0.0            libpng/1.6.39               texlive/2023</span>
<span class="go">anaconda3/4.0.0            libtool/2.4.7               tiff/4.5.0</span>
<span class="go">anaconda3/5.3.1            libuv/1.44.2                topspin/4.1.4</span>
<span class="go">anaconda3/2020.11          libxkbcommon/1.3.0          trimgalore/0.6.6</span>
<span class="go">anaconda3/2021.05          libxscrnsaver/1.0.0         trnascan-se/2.0.11</span>
<span class="go">[...]</span>
</pre></div>
</div>
<p>The <code class="docutils literal notranslate"><span class="pre">avail</span></code> command can also be used to list module versions by name:</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="gp">$ </span>module<span class="w"> </span>avail<span class="w"> </span>samtools
<span class="go">-------------------------- /opt/software/modules --------------------------</span>
<span class="go">samtools/1.12  samtools/1.17</span>
</pre></div>
</div>
<p>Additionally, auto-completion is available in the bash shell if you
press tab after a module (partial) name when running <cite>module load</cite> (see
below).</p>
<p>If you are not sure of the exact name of a module, then the <code class="docutils literal notranslate"><span class="pre">search</span></code>
command can be used to search module names and descriptions:</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="gp">$ </span>module<span class="w"> </span>search<span class="w"> </span>conda
<span class="go"> -------------------------- /opt/software/modules ---------------------------</span>
<span class="go">     cellranger/3.1.0: a set of analysis pipelines that process [...]</span>
<span class="go">     cellranger/6.1.1: a set of analysis pipelines that process [...]</span>
<span class="go">     cellranger/6.1.2: a set of analysis pipelines that process [...]</span>
<span class="go">          mamba/1.4.1: a fast, robust, and cross-platform package [...]</span>
<span class="go">         mamba/23.3.1: a fast, robust, and cross-platform package [...]</span>
<span class="go">      miniconda/4.9.2: free minimal installer for conda</span>
<span class="go">     miniconda/4.10.4: free minimal installer for conda</span>
</pre></div>
</div>
<div class="admonition warning">
<p class="admonition-title">Warning</p>
<p>Software modules are added/updated on request and not necessarily
when a new version of a tool is released. It is therefore highly
recommended to always check that the available versions of tools fit
your needs before starting a project.</p>
</div>
<p>If the software you need or the <em>version</em> of the software you need is
missing, then you can request that a module be added for that software
as described in the <a class="reference internal" href="#s-requesting-missing-modules"><span class="std std-ref">Requesting software modules</span></a> section below.</p>
</section>
<section id="loading-a-module">
<h3>Loading a module<a class="headerlink" href="#loading-a-module" title="Link to this heading">¶</a></h3>
<p>The modules are loaded using the <code class="docutils literal notranslate"><span class="pre">module</span> <span class="pre">load</span></code> command. This command
adds the executable to your PATH and performs any other setup required
to run the software.</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="gp">$ </span>samtools
<span class="go">-bash: samtools: command not found</span>
<span class="gp">$ </span>module<span class="w"> </span>load<span class="w"> </span>samtools
<span class="gp">$ </span>samtools
<span class="go">Program: samtools (Tools for alignments in the SAM format)</span>
<span class="go">Version: 1.17 (using htslib 1.17)</span>
<span class="go">[...]</span>
</pre></div>
</div>
<p>Specifying the exact version of a module that you want to load is highly
recommended. This ensures that your results are reproducible:</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="gp">$ </span>module<span class="w"> </span>load<span class="w"> </span>samtools/1.12
<span class="gp">$ </span>samtools
<span class="go">Program: samtools (Tools for alignments in the SAM format)</span>
<span class="go">Version: 1.12 (using htslib 1.12)</span>
<span class="go">[...]</span>
</pre></div>
</div>
<div class="admonition warning">
<p class="admonition-title">Warning</p>
<p>New versions of software are added whenever people request them. This
means that, if you do <em>not</em> specify a version when loading software,
the results of your analyses may change in subtle or not so subtle
ways while you are still working on a project.</p>
<p>You should therefore <em>always</em> specify exact versions for the tools
you use when loading modules.</p>
</div>
<p>In some cases one module will require another module:</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="gp">$ </span>module<span class="w"> </span>load<span class="w"> </span>bcftools/1.16
<span class="go">Loading bcftools/1.16</span>
<span class="go">ERROR: bcftools/1.16 cannot be loaded due to missing prereq.</span>
<span class="go">   HINT: the following module must be loaded first: perl</span>
</pre></div>
</div>
<p>In that case you simply need to load the required module first. This can
be done in done manually:</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="gp">$ </span>module<span class="w"> </span>load<span class="w"> </span>perl
<span class="gp">$ </span>module<span class="w"> </span>load<span class="w"> </span>bcftools/1.16
</pre></div>
</div>
<p>Or automatically:</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="gp">$ </span>module<span class="w"> </span>load<span class="w"> </span>--auto<span class="w"> </span>bcftools
<span class="go">Loading bcftools/1.16</span>
<span class="go">  Loading requirement: perl/5.26.3</span>
</pre></div>
</div>
</section>
<section id="additional-activation-steps">
<h3>Additional activation steps<a class="headerlink" href="#additional-activation-steps" title="Link to this heading">¶</a></h3>
<p>Some modules require additional steps before you can use them. If so,
then this is typically described in the <code class="docutils literal notranslate"><span class="pre">module</span> <span class="pre">display</span></code> text:</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="gp">$ </span>module<span class="w"> </span>display<span class="w"> </span>cellect/1.0

<span class="go">    /opt/software/modules/cellect/1.0:</span>

<span class="go">    module-whatis   {CELL-type Expression-specific integration for Complex Traits (CELLECT) is a computational toolkit for identifying likely etiologic cell-types underlying complex traits.}</span>
<span class="go">    conflict        cellect</span>
<span class="go">    prereq          miniconda/4.12.0</span>
<span class="go">    prepend-path    PATH /opt/software/cellect/1.0</span>
<span class="go">    setenv          CELLECT /opt/software/cellect/1.0</span>

<span class="hll"><span class="go">    This module relies on snakemake which is available using: module load miniconda/4.12.0 followed by conda activate snakemake. You will need to provide your own config-file specifying an outdir.</span>
</span><span class="go">    To read more about cellect go to https://github.com/perslab/CELLECT?tab=readme-ov-file</span>
</pre></div>
</div>
<p>Thus, if we wanted to use <code class="docutils literal notranslate"><span class="pre">cellect/1.0</span></code>, we would need to perform the
following steps:</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="gp">$ </span>module<span class="w"> </span>display<span class="w"> </span>cellect/1.0
<span class="gp">$ </span>module<span class="w"> </span>load<span class="w"> </span>miniconda/4.12.0
<span class="gp">$ </span>conda<span class="w"> </span>activate<span class="w"> </span>snakemake
</pre></div>
</div>
<div class="admonition warning">
<p class="admonition-title">Warning</p>
<p>Modules that make use of conda environments may cause conflict with
other modules and/or your own conda environments. For this reason, if
you need to use multiple modules and one or more of them uses conda,
creating a personal conda environment containing all the software you
need is recommended. This minimizes the risk of conflicts and errors.</p>
</div>
</section>
<section id="listing-and-unloading-loaded-modules">
<h3>Listing and unloading loaded modules<a class="headerlink" href="#listing-and-unloading-loaded-modules" title="Link to this heading">¶</a></h3>
<p>The modules you have loaded can be listed using the <code class="docutils literal notranslate"><span class="pre">module</span> <span class="pre">list</span></code>
command:</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="gp">$ </span>modules<span class="w"> </span>list
<span class="go">Currently Loaded Modulefiles:</span>
<span class="go"> 1) perl/5.26.3   2) bcftools/1.16   3) samtools/1.12</span>
</pre></div>
</div>
<p>To remove a module that you no longer need, use the <code class="docutils literal notranslate"><span class="pre">module</span> <span class="pre">unload</span></code>
command to unload a single module:</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="gp">$ </span>module<span class="w"> </span>unload<span class="w"> </span>samtools
</pre></div>
</div>
<p>Alternatively, you can use the <code class="docutils literal notranslate"><span class="pre">module</span> <span class="pre">purge</span></code> command to unload all
modules:</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="gp">$ </span>module<span class="w"> </span>purge
<span class="gp">$ </span>modules<span class="w"> </span>list
<span class="go">No Modulefiles Currently Loaded.</span>
</pre></div>
</div>
</section>
</section>
<section id="making-your-analyses-reproducible">
<h2>Making your analyses reproducible<a class="headerlink" href="#making-your-analyses-reproducible" title="Link to this heading">¶</a></h2>
<p>As described above you can load modules with or without versions
specified. For a lot of software it is not very important that a
specific version used, but even so it is highly recommended that you
keep using the same versions of modules throughout a project.</p>
<ol class="arabic simple">
<li><p>This ensures that your results do not suddenly change if a new
version of a piece of software is installed.</p></li>
<li><p>It ensures that you can accurately report what versions of software
were used when it is time to publish your results.</p></li>
</ol>
<p>The following section describes using the built-in <code class="docutils literal notranslate"><span class="pre">save/restore</span></code>
commands to record and restoring your used modules, but it is also
possible to do this by hand.</p>
<section id="managing-modules-with-module-save-restore">
<h3>Managing modules with <code class="docutils literal notranslate"><span class="pre">module</span> <span class="pre">save/restore</span></code><a class="headerlink" href="#managing-modules-with-module-save-restore" title="Link to this heading">¶</a></h3>
<p>To export a list of your currently used models, use the following
command:</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="gp">$ </span>module<span class="w"> </span>config<span class="w"> </span>collection_pin_version<span class="w"> </span><span class="m">1</span>
<span class="gp">$ </span>module<span class="w"> </span>save<span class="w"> </span>./modules.txt
</pre></div>
</div>
<p>There are two important points here: Firstly, the <code class="docutils literal notranslate"><span class="pre">module</span> <span class="pre">config</span>
<span class="pre">collection_pin_version</span> <span class="pre">1</span></code> command <em>must</em> be run first. If this is not
done, then the specific versions of modules are not recorded.</p>
<p>Secondly, the filename used in the second command (<code class="docutils literal notranslate"><span class="pre">./modules.txt</span></code>)
<em>must</em> contain a directory component (e.g. <code class="docutils literal notranslate"><span class="pre">./</span></code>). If this is not done,
then the list is saved in a local database rather than as a file. Saving
the list as a local file is recommended as it allows other users to see
what software you used.</p>
<p>If used correctly, the <code class="docutils literal notranslate"><span class="pre">./modules.txt</span></code> file will contain the currently
loaded modules, e.g:</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="gp">$ </span>module<span class="w"> </span>list
<span class="go">Currently Loaded Modulefiles:</span>
<span class="go">1) gcc/11.2.0   2) samtools/1.17   3) perl/5.26.3   4) bcftools/1.16</span>
<span class="gp">$ </span>module<span class="w"> </span>config<span class="w"> </span>collection_pin_version<span class="w"> </span><span class="m">1</span>
<span class="gp">$ </span>module<span class="w"> </span>save<span class="w"> </span>./modules.txt
<span class="gp">$ </span>cat<span class="w"> </span>modules.txt
<span class="go">module use --append /opt/software/modules</span>
<span class="go">module load gcc/11.2.0</span>
<span class="go">module load samtools/1.17</span>
<span class="go">module load perl/5.26.3</span>
<span class="go">module load bcftools/1.16</span>
</pre></div>
</div>
<p>To load the saved modules, simply run <code class="docutils literal notranslate"><span class="pre">module</span> <span class="pre">restore</span></code> with the same
filename (and a directory component):</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="gp">$ </span>module<span class="w"> </span>list
<span class="go">No Modulefiles Currently Loaded.</span>
<span class="gp">$ </span>module<span class="w"> </span>restore<span class="w"> </span>./modules.txt
<span class="gp">$ </span>module<span class="w"> </span>list
<span class="go">Currently Loaded Modulefiles:</span>
<span class="go">1) gcc/11.2.0   2) samtools/1.17   3) perl/5.26.3   4) bcftools/1.16</span>
</pre></div>
</div>
<p>Alternative, use the <code class="docutils literal notranslate"><span class="pre">.</span></code> command or the <code class="docutils literal notranslate"><span class="pre">source</span></code> command to execute
the content of the file in your current shell. This has the same effect
as running <code class="docutils literal notranslate"><span class="pre">module</span> <span class="pre">restore</span></code>:</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="gp">$ </span>.<span class="w"> </span>./modules.txt
</pre></div>
</div>
<p>or</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="gp">$ </span><span class="nb">source</span><span class="w"> </span>./modules.txt
</pre></div>
</div>
<p>Simply running the script with <code class="docutils literal notranslate"><span class="pre">bash</span> <span class="pre">modules.sh</span></code> will not work.</p>
</section>
</section>
<section id="shared-cbmr-modules">
<span id="s-shared-modules"></span><h2>Shared CBMR modules<a class="headerlink" href="#shared-cbmr-modules" title="Link to this heading">¶</a></h2>
<p>The Data Analytics team manages a small collection of modules for custom
tools in the <code class="docutils literal notranslate"><span class="pre">cbmr_shared</span></code> project, located under
<code class="docutils literal notranslate"><span class="pre">/projects/cbmr_shared/apps/modules</span></code>. You should have access to these
modules by default. If that is not the case, then please contact
<a class="reference internal" href="../contact.html#p-contact"><span class="std std-ref">contact us</span></a>.</p>
<p>These modules should be listed first when you use the <code class="docutils literal notranslate"><span class="pre">module</span> <span class="pre">avail</span></code>
command:</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="go">---------------- /projects/cbmr_shared/apps/modules/modulefiles ----------------</span>
<span class="go">add_dbsnp_ids/20231206_1  msconvert/20250218_1    sacct-usage/20240603_1</span>
<span class="go">annovep/20230808          pgs-calc/1.5.4          slurmboard/0.0.1</span>
<span class="go">[...]</span>

<span class="go">---------------------------- /opt/software/modules -----------------------------</span>
<span class="go">ABC/1.0.0                         macs/3.0.0                       zlib/1.2.11</span>
<span class="go">adapterremoval/2.3.3              mageck/0.5.9.4                   zlib/1.2.13</span>
<span class="go">[...]</span>
</pre></div>
</div>
<p>Should the modules not be listed, then you can manually register them
using the <code class="docutils literal notranslate"><span class="pre">module</span> <span class="pre">use</span></code> command:</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="gp">$ </span>module<span class="w"> </span>use<span class="w"> </span>--prepend<span class="w"> </span>/projects/cbmr_shared/apps/modules/modulefiles/
</pre></div>
</div>
<p>You can add the <code class="docutils literal notranslate"><span class="pre">module</span> <span class="pre">use</span></code> command to the end of your <code class="docutils literal notranslate"><span class="pre">~/.bashrc</span></code>
file to make the shared modules available every time you connect to
Esrum.</p>
</section>
<section id="requesting-software-modules">
<span id="s-requesting-missing-modules"></span><h2>Requesting software modules<a class="headerlink" href="#requesting-software-modules" title="Link to this heading">¶</a></h2>
<p>If the software you need is not available as a module, or if the
specific version you need is not available, then you can request it
through UCPH-IT as described below.</p>
<p>Software modules managed by UCPH-IT are available to the entirety of
UCPH, so if you need modules for software with licenses that do not
permit this, or if you need modules tailored for your specific needs,
then you are also welcome to <a class="reference internal" href="../contact.html#p-contact"><span class="std std-ref">contact us</span></a> for
assistance.</p>
<p>To request software through UCPH-IT,</p>
<ol class="arabic simple">
<li><p>Log in to the UCPH <a class="reference external" href="https://serviceportal.ku.dk/">IT Serviceportal</a>.</p></li>
<li><p>Click the <code class="docutils literal notranslate"><span class="pre">Create</span> <span class="pre">Ticket</span></code> / <code class="docutils literal notranslate"><span class="pre">Opret</span> <span class="pre">Sag</span></code> button.</p></li>
<li><p>Tick/select the <code class="docutils literal notranslate"><span class="pre">Research</span> <span class="pre">IT</span></code> / <code class="docutils literal notranslate"><span class="pre">Forsknings</span> <span class="pre">IT</span></code> category in the
category/filters list on the left side of the screen.</p></li>
<li><p>Click the <code class="docutils literal notranslate"><span class="pre">Research</span> <span class="pre">Applications</span> <span class="pre">Counseling</span> <span class="pre">and</span> <span class="pre">Support</span></code> /
<code class="docutils literal notranslate"><span class="pre">Forskningsapplikationer</span> <span class="pre">Rådgivning</span> <span class="pre">og</span> <span class="pre">support</span></code> button.</p></li>
<li><p>Click the <code class="docutils literal notranslate"><span class="pre">REQUEST</span></code> / <code class="docutils literal notranslate"><span class="pre">Bestil</span></code> button.</p></li>
<li><p>List what software you wish to have installed in the &quot;Please
describe&quot; text-box (see below).</p></li>
<li><p>Write &quot;esrumhead01fl.unicph.domain&quot; in the System name text-box.</p></li>
<li><p>Click the <code class="docutils literal notranslate"><span class="pre">Review</span> <span class="pre">&amp;</span> <span class="pre">submit</span></code> / <code class="docutils literal notranslate"><span class="pre">Gennemse</span> <span class="pre">&amp;</span> <span class="pre">bestil</span></code> button.</p></li>
<li><p>Review your ticket and then click the <code class="docutils literal notranslate"><span class="pre">Submit</span></code> / <code class="docutils literal notranslate"><span class="pre">Bestil</span></code> button.</p></li>
</ol>
<p>Your request should include the following information:</p>
<ol class="arabic simple">
<li><p>The name of the software.</p></li>
<li><p>The specific version requested (if any).</p></li>
<li><p>The homepage of the software.</p></li>
</ol>
<p>A request may look like the following:</p>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>Requesting the addition of environment modules for the following software:

1. seqtk v1.4 (https://github.com/lh3/seqtk)
2. jq v1.5 (https://stedolan.github.io/jq/)
3. igzip v2.30.0 (https://github.com/intel/isa-l)
</pre></div>
</div>
<div class="admonition warning">
<p class="admonition-title">Warning</p>
<p>If you are not an employee at CBMR you may not have permission to
open a ticket as described above. In that case simply
<a class="reference internal" href="../contact.html#p-contact"><span class="std std-ref">Contact us</span></a> us with your request, and we will forward it to
UCPH-IT.</p>
</div>
</section>
</section>

        </article>
      </div>
      <footer>
        
        <div class="related-pages">
          <a class="next-page" href="transfers.html">
              <div class="page-info">
                <div class="context">
                  <span>Next</span>
                </div>
                <div class="title">Transferring data</div>
              </div>
              <svg class="furo-related-icon"><use href="#svg-arrow-right"></use></svg>
            </a>
          <a class="prev-page" href="slurm/gpu.html">
              <svg class="furo-related-icon"><use href="#svg-arrow-right"></use></svg>
              <div class="page-info">
                <div class="context">
                  <span>Previous</span>
                </div>
                
                <div class="title">GPU / high-memory jobs</div>
                
              </div>
            </a>
        </div>
        <div class="bottom-of-page">
          <div class="left-details">
            <div class="copyright">
                Copyright &#169; 2023-2024, CBMR Data Analytics; licensed under CC-BY 4.0
            </div>
            Made with <a href="https://www.sphinx-doc.org/">Sphinx</a> and <a class="muted-link" href="https://pradyunsg.me">@pradyunsg</a>'s
            
            <a href="https://github.com/pradyunsg/furo">Furo</a>
            
          </div>
          <div class="right-details">
            
          </div>
        </div>
        
      </footer>
    </div>
    <aside class="toc-drawer">
      
      
      <div class="toc-sticky toc-scroll">
        <div class="toc-title-container">
          <span class="toc-title">
            On this page
          </span>
        </div>
        <div class="toc-tree-container">
          <div class="toc-tree">
            <ul>
<li><a class="reference internal" href="#">Software on Esrum</a><ul>
<li><a class="reference internal" href="#basic-usage">Basic usage</a><ul>
<li><a class="reference internal" href="#finding-available-modules">Finding available modules</a></li>
<li><a class="reference internal" href="#loading-a-module">Loading a module</a></li>
<li><a class="reference internal" href="#additional-activation-steps">Additional activation steps</a></li>
<li><a class="reference internal" href="#listing-and-unloading-loaded-modules">Listing and unloading loaded modules</a></li>
</ul>
</li>
<li><a class="reference internal" href="#making-your-analyses-reproducible">Making your analyses reproducible</a><ul>
<li><a class="reference internal" href="#managing-modules-with-module-save-restore">Managing modules with <code class="docutils literal notranslate"><span class="pre">module</span> <span class="pre">save/restore</span></code></a></li>
</ul>
</li>
<li><a class="reference internal" href="#shared-cbmr-modules">Shared CBMR modules</a></li>
<li><a class="reference internal" href="#requesting-software-modules">Requesting software modules</a></li>
</ul>
</li>
</ul>

          </div>
        </div>
      </div>
      
      
    </aside>
  </div>
</div><script src="../_static/documentation_options.js?v=5929fcd5"></script>
    <script src="../_static/doctools.js?v=9a2dae69"></script>
    <script src="../_static/sphinx_highlight.js?v=dc90522c"></script>
    <script src="../_static/scripts/furo.js?v=4e2eecee"></script>
    <script src="../_static/clipboard.min.js?v=a7894cd8"></script>
    <script src="../_static/copybutton.js?v=a7c4b63f"></script>
    <script src="../_static/js/custom.js?v=1a77b013"></script>
    <script src="../_static/js/libgif.js?v=7adcb026"></script>
    <script src="../_static/js/playback.js?v=d7002ce9"></script>
    </body>
</html>
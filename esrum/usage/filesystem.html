<!doctype html>
<html class="no-js" lang="en" data-content_root="">
  <head><meta charset="utf-8"/>
    <meta name="viewport" content="width=device-width,initial-scale=1"/>
    <meta name="color-scheme" content="light dark"><meta name="viewport" content="width=device-width, initial-scale=1" />
<link rel="search" title="Search" href="../search.html" /><link rel="next" title="Creating projects and datasets" href="projects.html" /><link rel="prev" title="Connecting to the cluster" href="access/connecting.html" />

    <!-- Generated with Sphinx 7.1.2 and Furo 2024.01.29 -->
        <title>Data storage on Esrum - Esrum Cluster documentation</title>
      <link rel="stylesheet" type="text/css" href="../_static/pygments.css?v=8f2a1f02" />
    <link rel="stylesheet" type="text/css" href="../_static/styles/furo.css?v=135e06be" />
    <link rel="stylesheet" type="text/css" href="../_static/styles/furo-extensions.css?v=36a5483c" />
    <link rel="stylesheet" type="text/css" href="../_static/css/playback.css?v=2c0b8537" />
    <link rel="stylesheet" type="text/css" href="../_static/css/theme.css?v=e2322aab" />
    
    


<style>
  body {
    --color-code-background: #f8f8f8;
  --color-code-foreground: black;
  
  }
  @media not print {
    body[data-theme="dark"] {
      --color-code-background: #202020;
  --color-code-foreground: #d0d0d0;
  
    }
    @media (prefers-color-scheme: dark) {
      body:not([data-theme="light"]) {
        --color-code-background: #202020;
  --color-code-foreground: #d0d0d0;
  
      }
    }
  }
</style></head>
  <body>
    
    <script>
      document.body.dataset.theme = localStorage.getItem("theme") || "auto";
    </script>
    

<svg xmlns="http://www.w3.org/2000/svg" style="display: none;">
  <symbol id="svg-toc" viewBox="0 0 24 24">
    <title>Contents</title>
    <svg stroke="currentColor" fill="currentColor" stroke-width="0" viewBox="0 0 1024 1024">
      <path d="M408 442h480c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8H408c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8zm-8 204c0 4.4 3.6 8 8 8h480c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8H408c-4.4 0-8 3.6-8 8v56zm504-486H120c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8h784c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8zm0 632H120c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8h784c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8zM115.4 518.9L271.7 642c5.8 4.6 14.4.5 14.4-6.9V388.9c0-7.4-8.5-11.5-14.4-6.9L115.4 505.1a8.74 8.74 0 0 0 0 13.8z"/>
    </svg>
  </symbol>
  <symbol id="svg-menu" viewBox="0 0 24 24">
    <title>Menu</title>
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather-menu">
      <line x1="3" y1="12" x2="21" y2="12"></line>
      <line x1="3" y1="6" x2="21" y2="6"></line>
      <line x1="3" y1="18" x2="21" y2="18"></line>
    </svg>
  </symbol>
  <symbol id="svg-arrow-right" viewBox="0 0 24 24">
    <title>Expand</title>
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather-chevron-right">
      <polyline points="9 18 15 12 9 6"></polyline>
    </svg>
  </symbol>
  <symbol id="svg-sun" viewBox="0 0 24 24">
    <title>Light mode</title>
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round" class="feather-sun">
      <circle cx="12" cy="12" r="5"></circle>
      <line x1="12" y1="1" x2="12" y2="3"></line>
      <line x1="12" y1="21" x2="12" y2="23"></line>
      <line x1="4.22" y1="4.22" x2="5.64" y2="5.64"></line>
      <line x1="18.36" y1="18.36" x2="19.78" y2="19.78"></line>
      <line x1="1" y1="12" x2="3" y2="12"></line>
      <line x1="21" y1="12" x2="23" y2="12"></line>
      <line x1="4.22" y1="19.78" x2="5.64" y2="18.36"></line>
      <line x1="18.36" y1="5.64" x2="19.78" y2="4.22"></line>
    </svg>
  </symbol>
  <symbol id="svg-moon" viewBox="0 0 24 24">
    <title>Dark mode</title>
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round" class="icon-tabler-moon">
      <path stroke="none" d="M0 0h24v24H0z" fill="none" />
      <path d="M12 3c.132 0 .263 0 .393 0a7.5 7.5 0 0 0 7.92 12.446a9 9 0 1 1 -8.313 -12.454z" />
    </svg>
  </symbol>
  <symbol id="svg-sun-half" viewBox="0 0 24 24">
    <title>Auto light/dark mode</title>
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round" class="icon-tabler-shadow">
      <path stroke="none" d="M0 0h24v24H0z" fill="none"/>
      <circle cx="12" cy="12" r="9" />
      <path d="M13 12h5" />
      <path d="M13 15h4" />
      <path d="M13 18h1" />
      <path d="M13 9h4" />
      <path d="M13 6h1" />
    </svg>
  </symbol>
</svg>

<input type="checkbox" class="sidebar-toggle" name="__navigation" id="__navigation">
<input type="checkbox" class="sidebar-toggle" name="__toc" id="__toc">
<label class="overlay sidebar-overlay" for="__navigation">
  <div class="visually-hidden">Hide navigation sidebar</div>
</label>
<label class="overlay toc-overlay" for="__toc">
  <div class="visually-hidden">Hide table of contents sidebar</div>
</label>



<div class="page">
  <header class="mobile-header">
    <div class="header-left">
      <label class="nav-overlay-icon" for="__navigation">
        <div class="visually-hidden">Toggle site navigation sidebar</div>
        <i class="icon"><svg><use href="#svg-menu"></use></svg></i>
      </label>
    </div>
    <div class="header-center">
      <a href="../index.html"><div class="brand">Esrum Cluster  documentation</div></a>
    </div>
    <div class="header-right">
      <div class="theme-toggle-container theme-toggle-header">
        <button class="theme-toggle">
          <div class="visually-hidden">Toggle Light / Dark / Auto color theme</div>
          <svg class="theme-icon-when-auto"><use href="#svg-sun-half"></use></svg>
          <svg class="theme-icon-when-dark"><use href="#svg-moon"></use></svg>
          <svg class="theme-icon-when-light"><use href="#svg-sun"></use></svg>
        </button>
      </div>
      <label class="toc-overlay-icon toc-header-icon" for="__toc">
        <div class="visually-hidden">Toggle table of contents sidebar</div>
        <i class="icon"><svg><use href="#svg-toc"></use></svg></i>
      </label>
    </div>
  </header>
  <aside class="sidebar-drawer">
    <div class="sidebar-container">
      
      <div class="sidebar-sticky"><a class="sidebar-brand" href="../index.html">
  
  
  <span class="sidebar-brand-text">Esrum Cluster  documentation</span>
  
</a><form class="sidebar-search-container" method="get" action="../search.html" role="search">
  <input class="sidebar-search" placeholder="Search" name="q" aria-label="Search">
  <input type="hidden" name="check_keywords" value="yes">
  <input type="hidden" name="area" value="default">
</form>
<div id="searchbox"></div><div class="sidebar-scroll"><div class="sidebar-tree">
  <ul>
<li class="toctree-l1"><a class="reference internal" href="../contact.html">Contact us</a></li>
<li class="toctree-l1"><a class="reference internal" href="../overview.html">Overview of cluster</a></li>
<li class="toctree-l1"><a class="reference internal" href="../guidelines.html">Guidelines and policies</a></li>
<li class="toctree-l1"><a class="reference internal" href="../troubleshooting.html">Troubleshooting</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Using the cluster</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="access/access.html">Applying for access</a></li>
<li class="toctree-l1"><a class="reference internal" href="access/connecting.html">Connecting to the cluster</a></li>
<li class="toctree-l1 current has-children current-page"><a class="current reference internal" href="#">Data storage on Esrum</a><input checked="" class="toctree-checkbox" id="toctree-checkbox-1" name="toctree-checkbox-1" role="switch" type="checkbox"/><label for="toctree-checkbox-1"><div class="visually-hidden">Toggle navigation of Data storage on Esrum</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l2"><a class="reference internal" href="projects.html">Creating projects and datasets</a></li>
</ul>
</li>
<li class="toctree-l1 has-children"><a class="reference internal" href="slurm/index.html">Running jobs using Slurm</a><input class="toctree-checkbox" id="toctree-checkbox-2" name="toctree-checkbox-2" role="switch" type="checkbox"/><label for="toctree-checkbox-2"><div class="visually-hidden">Toggle navigation of Running jobs using Slurm</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l2"><a class="reference internal" href="slurm/basics.html">Basic Slurm jobs</a></li>
<li class="toctree-l2"><a class="reference internal" href="slurm/advanced.html">Advanced Slurm jobs</a></li>
<li class="toctree-l2"><a class="reference internal" href="slurm/gpu.html">Using the GPU / high-memory nodes</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="modules.html">Software on Esrum</a></li>
<li class="toctree-l1"><a class="reference internal" href="transfers.html">Transferring data</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Resources</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../resources/cohorts.html">Human cohorts</a></li>
<li class="toctree-l1"><a class="reference internal" href="../resources/common.html">Common datasets</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Other services</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../services/r.html">R and RStudio</a></li>
<li class="toctree-l1"><a class="reference internal" href="../services/jupyter.html">Jupyter Notebooks</a></li>
<li class="toctree-l1"><a class="reference internal" href="../services/containers.html">Containerized software</a></li>
<li class="toctree-l1"><a class="reference internal" href="../services/shiny.html">Shiny servers</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Tips and tricks</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../tips/modules.html">Creating environment modules</a></li>
<li class="toctree-l1"><a class="reference internal" href="../tips/tmux.html">Persistent sessions with tmux</a></li>
<li class="toctree-l1"><a class="reference internal" href="../tips/batching_commands.html">Batching commands in bash</a></li>
<li class="toctree-l1"><a class="reference internal" href="../tips/robust_scripts.html">Writing robust bash scripts</a></li>
<li class="toctree-l1"><a class="reference internal" href="../tips/snakemake.html">Using Snakemake on Esrum</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Outreach</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../communications/messages.html">Welcome email</a></li>
<li class="toctree-l1"><a class="reference internal" href="../communications/presentations.html">Presentations</a></li>
</ul>

</div>
</div>

      </div>
      
    </div>
  </aside>
  <div class="main">
    <div class="content">
      <div class="article-container">
        <a href="#" class="back-to-top muted-link">
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24">
            <path d="M13 20h-2V8l-5.5 5.5-1.42-1.42L12 4.16l7.92 7.92-1.42 1.42L13 8v12z"></path>
          </svg>
          <span>Back to top</span>
        </a>
        <div class="content-icon-container">
          <div class="edit-this-page">
  <a class="muted-link" href="https://github.com/cbmr-data/cbmr-data.github.io/edit/main/esrum/source/usage/filesystem.rst" title="Edit this page">
    <svg aria-hidden="true" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">
      <path stroke="none" d="M0 0h24v24H0z" fill="none"/>
      <path d="M4 20h4l10.5 -10.5a1.5 1.5 0 0 0 -4 -4l-10.5 10.5v4" />
      <line x1="13.5" y1="6.5" x2="17.5" y2="10.5" />
    </svg>
    <span class="visually-hidden">Edit this page</span>
  </a>
</div><div class="theme-toggle-container theme-toggle-content">
            <button class="theme-toggle">
              <div class="visually-hidden">Toggle Light / Dark / Auto color theme</div>
              <svg class="theme-icon-when-auto"><use href="#svg-sun-half"></use></svg>
              <svg class="theme-icon-when-dark"><use href="#svg-moon"></use></svg>
              <svg class="theme-icon-when-light"><use href="#svg-sun"></use></svg>
            </button>
          </div>
          <label class="toc-overlay-icon toc-content-icon" for="__toc">
            <div class="visually-hidden">Toggle table of contents sidebar</div>
            <i class="icon"><svg><use href="#svg-toc"></use></svg></i>
          </label>
        </div>
        <article role="main">
          <section id="data-storage-on-esrum">
<span id="p-usage-filesystem"></span><h1>Data storage on Esrum<a class="headerlink" href="#data-storage-on-esrum" title="Permalink to this heading">#</a></h1>
<div class="toctree-wrapper compound">
</div>
<p>This section describes the layout of your home folder on Esrum, as well
as the location and layout of projects, shared datasets, and per-node
&quot;scratch&quot; folders. Briefly, the file system looks as follows:</p>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>/home/
  abc123/
    ucph/
      hdir/
      ndir/
      sdir/
/projects/
  my-project/
    apps/
    data/
    people/
    scratch/
  my-human-project-AUDIT/
    ...
/datasets/
  my-dataset/
  my-human-dataset-AUDIT/
/scratch/
</pre></div>
</div>
<p>When you are first given access to Esrum, you will by default have
access to your home folder, the scratch folders on each node, and the
CBMR wide project folder (<code class="docutils literal notranslate"><span class="pre">/projects/cbmr_shared</span></code>). Please see the
<a class="reference internal" href="access/access.html#p-usage-access-applying"><span class="std std-ref">Applying for access</span></a> page for information about applying for
access to additional projects and datasets.</p>
<div class="admonition warning">
<p class="admonition-title">Warning</p>
<p>Every folder described below is located on a network drive, except
for the per-node <code class="docutils literal notranslate"><span class="pre">/scratch</span></code> folders. A consequence of this is that
a file created on one node may not be visible on other nodes until
some time later. This typically takes in the order of 10-20 seconds
depending on the network load.</p>
</div>
<section id="your-home-folder">
<span id="s-home-folder"></span><h2>Your home folder<a class="headerlink" href="#your-home-folder" title="Permalink to this heading">#</a></h2>
<p>Your home folder can hold 100 GB of data and is meant to store your
personal programs and related caches, configuration files, and similar
files that are not related to your projects.</p>
<p>We recommended that you to keep your non-project related scripts and
other such files in your group project folder. Project folders are
preserved even after you have left CBMR, so any scripts or other files
that your colleagues may depend on should be stored there.</p>
<div class="admonition warning">
<p class="admonition-title">Warning</p>
<p>Only you have access to your home folder! Do <strong>not</strong> put project
related files or anything else your colleagues may depend on in your
home folder!</p>
</div>
<div class="admonition tip">
<p class="admonition-title">Tip</p>
<p>You can check the remaining capacity in your home folder using the
<code class="docutils literal notranslate"><span class="pre">df</span> <span class="pre">-h</span> <span class="pre">~</span></code> command.</p>
</div>
<section id="ucph-network-drives-h-n-and-s">
<span id="s-ucph-network-drives"></span><h3>UCPH network drives (<code class="docutils literal notranslate"><span class="pre">H:</span></code>, <code class="docutils literal notranslate"><span class="pre">N:</span></code>, and <code class="docutils literal notranslate"><span class="pre">S:</span></code>)<a class="headerlink" href="#ucph-network-drives-h-n-and-s" title="Permalink to this heading">#</a></h3>
<p>When you log in to Esrum for the first time, your home folder should
contain a (link to a) single folder named <code class="docutils literal notranslate"><span class="pre">ucph</span></code>. This folder in turn
contains (links to) your UCPH network drives:</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">~/ucph/hdir</span></code>: The H-drive is your personal drive for storing data
that is not shared with anyone else. This may include personal and
confidential data.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">~/ucph/ndir</span></code>: The N-drive is used shared data that is neither
personal nor confidential. You will have access to any number of
subfolders depending on your affiliations, including the
<code class="docutils literal notranslate"><span class="pre">SUN-CBMR-Shared-Info</span></code> containing files shared across the entire
center.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">~/ucph/sdir</span></code>: The S-drive (<code class="docutils literal notranslate"><span class="pre">S:</span></code>) is meant for sharing of
sensitive and personal data with other employees at UCPH. For more
information, see the <a class="reference external" href="https://kunet.ku.dk/employee-guide/Pages/IT/S-drive.aspx">official documentation</a>.</p></li>
</ul>
<p>These network drives are only accessible from the head node and access
is furthermore time-limited: Your access expires about 10 hours after
logging in.</p>
<p>It is therefore recommended to always copy data that you are working to
the corresponding <cite>/projects</cite> folder. If you don't have a <cite>/projects</cite>
folder, then see the <a class="reference internal" href="projects.html#p-usage-projects"><span class="std std-ref">Creating projects and datasets</span></a> page for instructions on
how to request a new project. Never use your home folder for this and
remember that projects have to be audited (indicated by the <code class="docutils literal notranslate"><span class="pre">-AUDIT</span></code>
suffix) if you are working on sensitive/protected data.</p>
<div class="admonition warning">
<p class="admonition-title">Warning</p>
<p>Because access to these network drives are time-limited, you should
never leave a terminal or other process (e.g. tmux or screen) running
<em>in</em> a network drive folder. Doing so results a lot of error messages
being written to the system logs, and to avoid this we may either
contact you to terminate those processes or simply terminate them
ourselves.</p>
</div>
<p>Should you be missing any of these folders, then please see the
<a class="reference internal" href="#s-filesystem-troubleshooting"><span class="std std-ref">Troubleshooting</span></a> section below.</p>
<p>If the folders/links exist, but you cannot access them, then please make
sure that you are not using GSSAPI (Kerberos) to login. See the
<a class="reference internal" href="access/connecting.html#s-network-drives-mobaxterm"><span class="std std-ref">Accessing network drives via MobaXterm</span></a> section for instructions for how to
disable this feature if you are using MobaXterm.</p>
<div class="admonition tip">
<p class="admonition-title">Tip</p>
<p>You can also access your network drives online via
<a class="reference external" href="https://webfile.ku.dk/">https://webfile.ku.dk/</a>.</p>
</div>
</section>
</section>
<section id="project-folders">
<span id="s-project-folders"></span><h2>Project folders<a class="headerlink" href="#project-folders" title="Permalink to this heading">#</a></h2>
<p>The majority of your work on Esrum should take place in project folder
corresponding either to your research group or to actual projects. This
ensures that your collaborators can access your results and that nobody
else can! See the <a class="reference internal" href="access/access.html#p-usage-access-applying"><span class="std std-ref">Applying for access</span></a> page for instructions
on how to apply for access to projects.</p>
<p>Projects on Esrum are located in the <code class="docutils literal notranslate"><span class="pre">/projects</span></code> folder:</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="gp">$ </span>ls<span class="w"> </span>-1<span class="w"> </span>/projects
<span class="go">phenomics-AUDIT</span>
<span class="go">genotyping</span>
<span class="go">...</span>
</pre></div>
</div>
<p>The <code class="docutils literal notranslate"><span class="pre">-AUDIT</span></code> suffix indicates that the <code class="docutils literal notranslate"><span class="pre">phenomics</span></code> project has been
configured for work on GDPR data. All work on GDPR data should take
place in project or data-shares (see below) marked with <code class="docutils literal notranslate"><span class="pre">-AUDIT</span></code> and
<em>nowhere else</em>!</p>
<p>Projects folder always contains the following four sub-folders:</p>
<ul>
<li><p><code class="docutils literal notranslate"><span class="pre">/projects/&lt;project-name&gt;/people</span></code></p>
<p>Every member of a project has their own folder in <code class="docutils literal notranslate"><span class="pre">people</span></code>. It is
suggested that you keep your scripts, configuration files,
documentation, and the like in this folder. The <code class="docutils literal notranslate"><span class="pre">people</span></code> folder is
automatically backed up every day.</p>
</li>
<li><p><code class="docutils literal notranslate"><span class="pre">/projects/&lt;project-name&gt;/apps</span></code></p>
<p>The <code class="docutils literal notranslate"><span class="pre">apps</span></code> folder is intended for storing software shared between
project members. See <a class="reference internal" href="../tips/modules.html#p-tips-modules"><span class="std std-ref">Creating environment modules</span></a> for how to set up a shared
repository of software that can be used with the module system. The
<code class="docutils literal notranslate"><span class="pre">apps</span></code> folder is automatically backed up every day.</p>
</li>
<li><p><code class="docutils literal notranslate"><span class="pre">/projects/&lt;project-name&gt;/data</span></code></p>
<p>The <code class="docutils literal notranslate"><span class="pre">data</span></code> folder is intended for datasets shared between project
members. This could be your raw data or your results files from
processing your raw data. The <code class="docutils literal notranslate"><span class="pre">data</span></code> folder is automatically backed
up every day.</p>
</li>
<li><p><code class="docutils literal notranslate"><span class="pre">/projects/&lt;project-name&gt;/scratch</span></code></p>
<p>The <code class="docutils literal notranslate"><span class="pre">scratch</span></code> folder is intended for temporary files, as it is
<em>not</em> backed up. It is also suitable for other files that do not need
to be backed up, including for example publicly available datasets,
large index files, and such.</p>
</li>
</ul>
<p>There is currently no limits on how much you store in these folders.
However, as UCPH has indicated that they will charge for storage in the
future, we recommend regularly cleaning up your project folders.</p>
<p>See the <a class="reference internal" href="projects.html#p-usage-projects"><span class="std std-ref">Creating projects and datasets</span></a> page for how to request a new project
folder.</p>
</section>
<section id="datasets">
<h2>Datasets<a class="headerlink" href="#datasets" title="Permalink to this heading">#</a></h2>
<p>Unlike projects, datasets are meant for static data that may be accessed
by multiple parties. Access to datasets is therefore segregated into
users who only have read access and users with read and write access
(the owners). Examples of datasets include shared resources, cohorts, as
well as automatically deposited instrument data.</p>
<p>Datasets on Esrum are located in the <code class="docutils literal notranslate"><span class="pre">/datasets</span></code> folder. Unlike
projects, where you will find four standard folders, the directory
structure of <code class="docutils literal notranslate"><span class="pre">/datasets</span></code> folders are entirely up to the owner.</p>
<p>Similarly to projects, dataset folders (meant for) containing GDPR data
are marked by the <code class="docutils literal notranslate"><span class="pre">-AUDIT</span></code> suffix. GDPR datasets must be stored in
such folders and <em>nowhere else</em>!</p>
<p>There is currently no limits on how much you store in these folders.
However, as UCPH has indicated that they will charge for storage in the
future, we recommend only storing data that you actually need.</p>
<p>See the <a class="reference internal" href="projects.html#p-usage-projects"><span class="std std-ref">Creating projects and datasets</span></a> page for how to request a new dataset
folder.</p>
</section>
<section id="scratch-folders">
<h2>Scratch folders<a class="headerlink" href="#scratch-folders" title="Permalink to this heading">#</a></h2>
<p>Every node on Esrum (including the head node) has a 1.5-3 TB scratch
drive available at <code class="docutils literal notranslate"><span class="pre">/scratch</span></code>. This is intended for short-lived
temporary files generated as part of jobs running on the cluster, and
can provide a significant performance benefit if a job, for example,
writes a lot of small temporary files.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>Note that unlike your home folder, <code class="docutils literal notranslate"><span class="pre">/projects</span></code>, and <code class="docutils literal notranslate"><span class="pre">/datasets</span></code>,
the <code class="docutils literal notranslate"><span class="pre">/scratch</span></code> folders are physically located on each node. Files
written to <code class="docutils literal notranslate"><span class="pre">/scratch</span></code> on one node are therefore <em>not</em> accessible on
other nodes.</p>
</div>
<p>It is recommended that you create a sub-folder containing your UCPH-IT
username when using the scratch-drive as part of your scripts:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="c1"># Create temporary folder in the form /scratch/abc123</span>
mkdir<span class="w"> </span>-p<span class="w"> </span><span class="s2">&quot;/scratch/</span><span class="si">${</span><span class="nv">USER</span><span class="si">}</span><span class="s2">&quot;</span>
<span class="c1"># Some software use the TMPDIR to place temporary files</span>
<span class="nb">export</span><span class="w"> </span><span class="nv">TMPDIR</span><span class="o">=</span><span class="s2">&quot;/scratch/</span><span class="si">${</span><span class="nv">USER</span><span class="si">}</span><span class="s2">&quot;</span>
<span class="c1"># Other software has options for where to place temporary files</span>
mysoftware<span class="w"> </span>--in<span class="w"> </span><span class="s2">&quot;mydata&quot;</span><span class="w"> </span>--out<span class="w"> </span><span class="s2">&quot;myresults&quot;</span><span class="w"> </span>--temp<span class="w"> </span><span class="s2">&quot;/scratch/</span><span class="si">${</span><span class="nv">USER</span><span class="si">}</span><span class="s2">&quot;</span>
</pre></div>
</div>
<div class="admonition warning">
<p class="admonition-title">Warning</p>
<p>The scratch-drives have limited capacity and are <em>only</em> intended for
short-lived, temporary files. Do not use it to store results, and
please remember to clean up after your jobs. Files left on the
scratch-drive <em>will</em> be deleted.</p>
</div>
</section>
<section id="backups">
<h2>Backups<a class="headerlink" href="#backups" title="Permalink to this heading">#</a></h2>
<p>Backups are available your home folder and in project folders <code class="docutils literal notranslate"><span class="pre">/apps</span></code>,
<code class="docutils literal notranslate"><span class="pre">/data</span></code>, and <code class="docutils literal notranslate"><span class="pre">/people</span></code> via special hidden <code class="docutils literal notranslate"><span class="pre">.snapshot</span></code> folders in
the root of each of these folders. For example, to access the snapshots
of the <code class="docutils literal notranslate"><span class="pre">/data</span></code> folder in the project <code class="docutils literal notranslate"><span class="pre">phenomics</span></code>:</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="gp">$ </span><span class="nb">cd</span><span class="w"> </span>/projects/phenomics/data/.snapshot
<span class="gp">$ </span>ls
<span class="go">42-Research-hourly-7D-2023-09-01_02:00</span>
<span class="go">42-Research-daily-30D-2023-09-02_02:00</span>
<span class="go">42-Research-weekly-104W-2023-09-03_02:00</span>
</pre></div>
</div>
<p>Each timestamped folder contains a full snapshot of the parent folder
(<code class="docutils literal notranslate"><span class="pre">/home</span></code>, <code class="docutils literal notranslate"><span class="pre">/apps</span></code>, etc.) and you can copy data from these snapshots
should you need to restore deleted or modified files.</p>
<p>Snapshots of audited projects are only accessible for a limited time,
and you may therefore need to contact UCPH-IT to restore deleted data
for such projects.</p>
<div class="admonition warning">
<p class="admonition-title">Warning</p>
<p>Please contact UCPH-IT should you need to restore a large amount of
deleted data.</p>
</div>
</section>
<section id="troubleshooting">
<span id="s-filesystem-troubleshooting"></span><h2>Troubleshooting<a class="headerlink" href="#troubleshooting" title="Permalink to this heading">#</a></h2>
<section id="the-ucph-folder-or-subfolders-are-missing">
<h3>The <code class="docutils literal notranslate"><span class="pre">~/ucph</span></code> folder or subfolders are missing<a class="headerlink" href="#the-ucph-folder-or-subfolders-are-missing" title="Permalink to this heading">#</a></h3>
<p>Firstly, make sure that you are not using GSSAPI (Kerberos) to log in.
See the <a class="reference internal" href="access/connecting.html#p-usage-connecting"><span class="std std-ref">Connecting to the cluster</span></a> page for instructions for how to
disable this feature if you are using MobaXterm.</p>
<p>Once you have logged in to Esrum <em>without</em> GSSAPI enabled, and if the
folder(s) are still missing, then run the following command to create
any missing network folders:</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="gp">$ </span>bash<span class="w"> </span>/etc/profile.d/symlink-ucphmaps.sh
</pre></div>
</div>
<p>Once this is done, you should have a <code class="docutils literal notranslate"><span class="pre">ucph</span></code> symlink in your home
folder containing links to <code class="docutils literal notranslate"><span class="pre">hdir</span></code> (<code class="docutils literal notranslate"><span class="pre">H:</span></code>), <code class="docutils literal notranslate"><span class="pre">ndir</span></code> (<code class="docutils literal notranslate"><span class="pre">N:</span></code>), and
<code class="docutils literal notranslate"><span class="pre">sdir</span></code> (<code class="docutils literal notranslate"><span class="pre">S:</span></code>).</p>
</section>
<section id="no-such-file-or-directory-when-accessing-network-drives">
<h3><code class="docutils literal notranslate"><span class="pre">No</span> <span class="pre">such</span> <span class="pre">file</span> <span class="pre">or</span> <span class="pre">directory</span></code> when accessing network drives<a class="headerlink" href="#no-such-file-or-directory-when-accessing-network-drives" title="Permalink to this heading">#</a></h3>
<p>If you get a <code class="docutils literal notranslate"><span class="pre">No</span> <span class="pre">such</span> <span class="pre">file</span> <span class="pre">or</span> <span class="pre">directory</span></code> error when attempting to
access the network drives (<code class="docutils literal notranslate"><span class="pre">~/ucph/hdir</span></code>, <code class="docutils literal notranslate"><span class="pre">~/ucph/ndir</span></code>, or
<code class="docutils literal notranslate"><span class="pre">~/ucph/sdir</span></code>), then please make sure that you are not logging in
using Kerberos (GSSAPI). See the <a class="reference internal" href="access/connecting.html#s-network-drives-mobaxterm"><span class="std std-ref">Accessing network drives via MobaXterm</span></a>
section for instructions for how to disable this feature if you are
using MobaXterm. Note, however, that your login is also valid for about
10 hours, after which you will lose access to the network drives.</p>
<p>In either case, you can also re-authenticate after connecting to Esrum,
by running the <code class="docutils literal notranslate"><span class="pre">kinit</span></code> command in your terminal on Esrum:</p>
<div class="highlight-shell notranslate"><div class="highlight"><pre><span></span>$<span class="w"> </span>kinit
Password<span class="w"> </span><span class="k">for</span><span class="w"> </span>abc123@UNICPH.DOMAIN:<span class="w"> </span>*********
</pre></div>
</div>
<p>After a minute or two your <code class="docutils literal notranslate"><span class="pre">~/ucph</span></code> drives should be accessible again.</p>
<div class="admonition warning">
<p class="admonition-title">Warning</p>
<p><code class="docutils literal notranslate"><span class="pre">kinit</span></code> may fail if you are using a <code class="docutils literal notranslate"><span class="pre">conda</span></code> environment:</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="gp gp-VirtualEnv">(base)</span> <span class="gp">$ </span>kinit
<span class="go">kinit: Unknown credential cache type while getting default ccache</span>
</pre></div>
</div>
<p>In that case, run the command <code class="docutils literal notranslate"><span class="pre">conda</span> <span class="pre">deactivate</span></code> to deactivate the
current/base environment. This may require running <code class="docutils literal notranslate"><span class="pre">conda</span>
<span class="pre">deactivate</span></code> multiple times; your terminal line should not start with
<code class="docutils literal notranslate"><span class="pre">(base)</span></code> or similar.</p>
</div>
</section>
</section>
</section>

        </article>
      </div>
      <footer>
        
        <div class="related-pages">
          <a class="next-page" href="projects.html">
              <div class="page-info">
                <div class="context">
                  <span>Next</span>
                </div>
                <div class="title">Creating projects and datasets</div>
              </div>
              <svg class="furo-related-icon"><use href="#svg-arrow-right"></use></svg>
            </a>
          <a class="prev-page" href="access/connecting.html">
              <svg class="furo-related-icon"><use href="#svg-arrow-right"></use></svg>
              <div class="page-info">
                <div class="context">
                  <span>Previous</span>
                </div>
                
                <div class="title">Connecting to the cluster</div>
                
              </div>
            </a>
        </div>
        <div class="bottom-of-page">
          <div class="left-details">
            <div class="copyright">
                Copyright &#169; 2023-2024, CBMR Data Analytics; licensed under CC-BY 4.0
            </div>
            Made with <a href="https://www.sphinx-doc.org/">Sphinx</a> and <a class="muted-link" href="https://pradyunsg.me">@pradyunsg</a>'s
            
            <a href="https://github.com/pradyunsg/furo">Furo</a>
            
          </div>
          <div class="right-details">
            
          </div>
        </div>
        
      </footer>
    </div>
    <aside class="toc-drawer">
      
      
      <div class="toc-sticky toc-scroll">
        <div class="toc-title-container">
          <span class="toc-title">
            On this page
          </span>
        </div>
        <div class="toc-tree-container">
          <div class="toc-tree">
            <ul>
<li><a class="reference internal" href="#">Data storage on Esrum</a><ul>
<li><a class="reference internal" href="#your-home-folder">Your home folder</a><ul>
<li><a class="reference internal" href="#ucph-network-drives-h-n-and-s">UCPH network drives (<code class="docutils literal notranslate"><span class="pre">H:</span></code>, <code class="docutils literal notranslate"><span class="pre">N:</span></code>, and <code class="docutils literal notranslate"><span class="pre">S:</span></code>)</a></li>
</ul>
</li>
<li><a class="reference internal" href="#project-folders">Project folders</a></li>
<li><a class="reference internal" href="#datasets">Datasets</a></li>
<li><a class="reference internal" href="#scratch-folders">Scratch folders</a></li>
<li><a class="reference internal" href="#backups">Backups</a></li>
<li><a class="reference internal" href="#troubleshooting">Troubleshooting</a><ul>
<li><a class="reference internal" href="#the-ucph-folder-or-subfolders-are-missing">The <code class="docutils literal notranslate"><span class="pre">~/ucph</span></code> folder or subfolders are missing</a></li>
<li><a class="reference internal" href="#no-such-file-or-directory-when-accessing-network-drives"><code class="docutils literal notranslate"><span class="pre">No</span> <span class="pre">such</span> <span class="pre">file</span> <span class="pre">or</span> <span class="pre">directory</span></code> when accessing network drives</a></li>
</ul>
</li>
</ul>
</li>
</ul>

          </div>
        </div>
      </div>
      
      
    </aside>
  </div>
</div><script data-url_root="../" id="documentation_options" src="../_static/documentation_options.js?v=b3ba4146"></script>
    <script src="../_static/doctools.js?v=888ff710"></script>
    <script src="../_static/sphinx_highlight.js?v=4825356b"></script>
    <script src="../_static/scripts/furo.js?v=32e29ea5"></script>
    <script src="../_static/js/custom.js?v=3a8ddbd3"></script>
    <script src="../_static/js/libgif.js?v=7adcb026"></script>
    <script src="../_static/js/playback.js?v=d7002ce9"></script>
    </body>
</html>